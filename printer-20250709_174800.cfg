[include configs/*.cfg]
[include mainsail.cfg]


# This file contains common pin mappings for the Voron Leviathan V1.1
# To use this config, the firmware should be compiled for the STM32F446 with "No bootloader"
# Enable "extra low-level configuration options" and select the "12MHz crystal" as clock reference

# See docs/Config_Reference.md for a description of parameters.

## Voron Design VORON 2 250/300/350mm Leviathan V1.1 config

## *** THINGS TO CHANGE/CHECK: ***
## MCU paths                            [mcu] section
## Thermistor types                     [extruder] and [heater_bed] sections - See https://www.klipper3d.org/Config_Reference.html#common-thermistors for common thermistor types
## Z Endstop Switch location            [safe_z_home] section
## Homing end position                  [gcode_macro G32] section
## Z Endstop Switch  offset for Z0      [stepper_z] section
## Probe points                         [quad_gantry_level] section
## Min & Max gantry corner postions     [quad_gantry_level] section
## PID tune                             [extruder] and [heater_bed] sections
## Probe pin                            [probe] section
## Fine tune E steps                    [extruder] section

#####################################################################
#   MCU Settings
#####################################################################


[mcu] # LDO Leviathan
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_510055001851323139353737-if00
restart_method: command
##--------------------------------------------------------------------

[mcu EBBCan] #BTT EBB36 Toolhead
canbus_uuid: a5efedc08bd5

[mcu scanner] #Cartographer3D
canbus_uuid: 8ed23c97b804 
#serial: /dev/serial/by-id/usb-cartographer_cartographer_

#####################################################################
#   Cartographer Settings
#####################################################################

[scanner]
mcu: scanner            
#   Offsets are measured from the center of your coil, to the tip of your nozzle 
#   on a level axis. It is vital that this is accurate. 
x_offset: 0                          
#    adjust for your cartographers offset from nozzle to middle of coil
y_offset: 19.5                         
#    adjust for your cartographers offset from nozzle to middle of coil
backlash_comp: 0.00298
#   Backlash compensation distance for removing Z backlash before measuring
#   the sensor response.
sensor: cartographer
#    this must be set as cartographer unless using IDM etc.
sensor_alt: carto
#    alternate name to call commands. CARTO_TOUCH etc      
mesh_runs: 2
#    Number of passes to make during mesh scan.
mode: touch


#####################################################################
#   Printer Settings
#####################################################################


[printer]
kinematics: corexy
max_velocity: 500  
max_accel: 20000
max_z_velocity: 15          #Max 15 for 12V TMC Drivers, can increase for 24V
max_z_accel: 200
square_corner_velocity: 5.0


#####################################################################
#   X/Y Stepper Settings
#####################################################################


##  B Stepper - Left
##  Connected to HV STEPPER 0
##  Endstop connected to X-ENDSTOP
[stepper_x]
step_pin: PB10
dir_pin: PB11
enable_pin: !PG0
rotation_distance: 40
microsteps: 32
full_steps_per_rotation:200  #set to 200 for 1.8 degree stepper
endstop_pin: ^EBBCan: PB9
position_min: 0
##--------------------------------------------------------------------

position_endstop: 300
position_max: 300

##--------------------------------------------------------------------
homing_speed: 60   #Max 100
homing_retract_dist: 5
homing_positive_dir: true

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc5160 stepper_x]
cs_pin: PE15
spi_bus: spi4
#diag0_pin: ^!PG1
interpolate: true
run_current: 1.5
#stealthchop_threshold: 0



##  A Stepper - Right
##  Connected to HV STEPPER 1
##  Endstop connected to Y-ENDSTOP
[stepper_y]
step_pin: PF15
dir_pin: PF14
enable_pin: !PE9
rotation_distance: 40
microsteps: 32
full_steps_per_rotation:200  #set to 200 for 1.8 degree stepper
endstop_pin: ^PC2
position_min: 0
##--------------------------------------------------------------------

position_endstop: 303
position_max: 303

##--------------------------------------------------------------------
homing_speed: 60  #Max 100
homing_retract_dist: 5
homing_positive_dir: true

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc5160 stepper_y]
cs_pin: PE11
spi_bus: spi4
#diag0_pin: ^!PE10
interpolate: true
run_current: 1.5
#stealthchop_threshold: 0

 
#####################################################################
#   Z Stepper Settings
#####################################################################


## Z0 Stepper - Front Left
##  Connected to STEPPER 0
##  Endstop connected to Z-ENDSTOP
[stepper_z]
step_pin: PD4
dir_pin: !PD3
enable_pin: !PD7
rotation_distance: 40
gear_ratio: 9:1 
microsteps: 32
endstop_pin: probe:z_virtual_endstop # uses cartographer as virtual endstop
homing_retract_dist: 0
##  Z-position of nozzle (in mm) to z-endstop trigger point relative to print surface (Z0)
##  (+) value = endstop above Z0, (-) value = endstop below
##  Increasing position_endstop brings nozzle closer to the bed
##  After you run Z_ENDSTOP_CALIBRATE, position_endstop will be stored at the very end of your config

position_max: 280
position_min: -5
homing_speed: 15

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc2209 stepper_z]
uart_pin: PD5
#diag_pin: ^!PD6
interpolate: true
run_current: 0.8
#stealthchop_threshold: 0

##  Z1 Stepper - Rear Left
##  Connected to STEPPER 1
[stepper_z1]
step_pin: PC12
dir_pin: PC11
enable_pin: !PD2
rotation_distance: 40
gear_ratio: 9:1 
microsteps: 32

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc2209 stepper_z1]
uart_pin: PD0
#diag_pin: ^!PD1
interpolate: true
run_current: 0.8
#stealthchop_threshold: 0

##  Z2 Stepper - Rear Right
##  Connected to STEPPER 2
[stepper_z2]
step_pin: PC9
dir_pin: !PC8
enable_pin: !PC10
rotation_distance: 40
gear_ratio: 9:1  
microsteps: 32

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc2209 stepper_z2]
uart_pin: PA8
#diag_pin: ^!PA15
interpolate: true
run_current: 0.8
#stealthchop_threshold: 0

##  Z3 Stepper - Front Right
##  Connected to STEPPER 3
[stepper_z3]
step_pin: PG7
dir_pin: PG6
enable_pin: !PC7
rotation_distance: 40
gear_ratio: 9:1 
microsteps: 32

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc2209 stepper_z3]
uart_pin: PG8
#diag_pin: ^!PC6
interpolate: true
run_current: 0.8
#stealthchop_threshold: 0


#####################################################################
#   Extruder
#####################################################################


[extruder]
step_pin: EBBCan: PD0
dir_pin: EBBCan: PD1
enable_pin: !EBBCan: PD2
microsteps: 16
rotation_distance: 47.319989212485
gear_ratio: 9:1
nozzle_diameter: 0.400
filament_diameter: 1.750
heater_pin: EBBCan: PB13

sensor_type: MAX31865
sensor_pin: EBBCan: PA4
spi_bus: spi1
rtd_nominal_r: 100
rtd_reference_r: 430
rtd_num_of_wires: 2

#control: pid
#pid_Kp: 36.523
#pid_Ki: 3.581
#pid_Kd: 93.133

min_temp: 0
max_temp: 300
max_extrude_only_distance: 300
max_extrude_cross_section: 5


[tmc2209 extruder]
uart_pin: EBBCan: PA15
run_current: 0.60


#####################################################################
#   TMC Autotune
#####################################################################


[autotune_tmc stepper_x]
motor: omc-17hs19-2504s-h
voltage: 48
tuning_goal: performance

[autotune_tmc stepper_y]
motor: omc-17hs19-2504s-h
voltage: 48
tuning_goal: performance

[autotune_tmc stepper_z]
motor: ldo-42sth40-1684ac
voltage: 24
tuning_goal: auto

[autotune_tmc stepper_z1]
motor: ldo-42sth40-1684ac
voltage: 24
tuning_goal: performance

[autotune_tmc stepper_z2]
motor: ldo-42sth40-1684ac
voltage: 24
tuning_goal: performance

[autotune_tmc stepper_z3]
motor: ldo-42sth40-1684ac
voltage: 24
tuning_goal: performance

[autotune_tmc extruder]
motor: ldo-36sth20-1004ahg-9T
voltage: 24
tuning_goal: performance


#####################################################################
#   Bed Heater
#####################################################################


[heater_bed]
##  SSR Pin - HEATBED
##  Thermistor - TH1
heater_pin: PG11
## Check what thermistor type you have. See https://www.klipper3d.org/Config_Reference.html#common-thermistors for common thermistor types.
sensor_type: Generic 3950
sensor_pin: PA1
pullup_resistor: 2200
##  Adjust Max Power so your heater doesn't warp your bed. Rule of thumb is 0.4 watts / cm^2 .
max_power: 1.0
min_temp: 0
max_temp: 120
pwm_cycle_time: 0.02674 # 37.4Hz


#control: pid
#pid_Kp: 42.596
#pid_ki: 1.487
#pid_kd: 305.093


#####################################################################
#   Temperature Sensors
#####################################################################

[temperature_sensor buildplate]
sensor_type: Generic 3950
sensor_pin: PA2
pullup_resistor: 2200
min_temp: -40
max_temp: 120

[temperature_sensor chamber]
sensor_type: Generic 3950
sensor_pin: PA0
pullup_resistor: 2200
min_temp: -40
max_temp: 120

[temperature_sensor Raspberry_Pi]
sensor_type: temperature_host
min_temp: -40
max_temp: 120


#####################################################################
#   Fan Control
#####################################################################


[fan]
##  Print Cooling Fan
pin: EBBCan: PA0
kick_start_time: 0.5
##  Depending on your fan, you may need to increase this value
##  if your fan will not start. Can change cycle_time (increase)
##  if your fan is not able to slow down effectively
off_below: 0.10

[heater_fan hotend_fan]
##  Hotend Fan
pin: EBBCan: PA1
tachometer_pin: EBBCan: PA3
max_power: 1.0
kick_start_time: 0.5
heater: extruder
heater_temp: 50.0
##  If you are experiencing back flow, you can reduce fan_speed
fan_speed: 1.0


#[multi_pin electronics_fans]
#pins: PB7, PB3

[controller_fan skirt_fan]
pin: PB3
kick_start_time: 0.5
fan_speed: .25
idle_timeout: 60
stepper: stepper_x, stepper_y, stepper_z, stepper_z1, stepper_z2, stepper_z3
heater: heater_bed

[controller_fan driver_fan]
pin: PB7
kick_start_time: 0.5
fan_speed: 1.0
idle_timeout: 60
stepper: stepper_x, stepper_y, stepper_z, stepper_z1, stepper_z2, stepper_z3
heater: heater_bed


#####################################################################
#   Homing and Gantry Adjustment Routines
#####################################################################

[idle_timeout]
timeout: 1800

[safe_z_home]
home_xy_position: 150, 150
z_hop: 10
speed: 300
z_hop_speed: 15

##  Use QUAD_GANTRY_LEVEL to level a gantry.
##  Min & Max gantry corners - measure from nozzle at MIN (0,0) and 
##  MAX (250, 250), (300,300), or (350,350) depending on your printer size
##  to respective belt positions


[quad_gantry_level]
gantry_corners: 
	-60,-10
	360,370
points:
   15,0  # Point 1
   15,261  # Point 2
   285,261 # Point 3
   285,0  # Point 4
#--------------------------------------------------------------------

speed: 450
horizontal_move_z: 10
retries: 5
retry_tolerance: 0.0075
max_adjust: 10


[gcode_macro QUAD_GANTRY_SCAN]
gcode = 
	QUAD_GANTRY_LEVEL horizontal_move_z=10 retry_tolerance=1.000
	QUAD_GANTRY_LEVEL horizontal_move_z=2
    G28 Z

#--------------------------------------------------------------------


#####################################################################
#   Macros
#####################################################################

[bed_mesh]
zero_reference_position: 150, 150 
#    set this to the middle of your bed
speed: 450
#    movement speed of toolhead during bed mesh
horizontal_move_z: 5
#    height of scanner during bed mesh scan
mesh_min: 15, 20
#    start point of bed mesh [X, Y]
mesh_max: 285, 290
#    end point of bed mesh [X, Y]
probe_count: 30, 30
algorithm: bicubic



[temperature_sensor Cartographer_MCU]
sensor_type: temperature_mcu
sensor_mcu: scanner
min_temp: 0
max_temp: 105


[adxl345]
cs_pin: scanner:PA3
spi_bus: spi1
axes_map: x,-y,-z

[resonance_tester]
accel_chip: adxl345
accel_per_hz: 125 # Testing from default of 75
probe_points:
    150, 150, 20


[exclude_object]


[gcode_arcs]
resolution = 0.1

[firmware_retraction]
retract_length: 0.8
#   The length of filament (in mm) to retract when G10 is activated,
#   and to unretract when G11 is activated (but see
#   unretract_extra_length below). The default is 0 mm.
retract_speed: 30
#   The speed of retraction, in mm/s. The default is 20 mm/s.
unretract_extra_length: 0.8
#   The length (in mm) of *additional* filament to add when
#   unretracting.
unretract_speed: 30
#   The speed of unretraction, in mm/s. The default is 10 mm/s.


[pause_resume]

[gcode_macro PAUSE]
rename_existing: BASE_PAUSE
gcode:
    # Parameters
    {% set z = params.Z|default(10)|int %}                                                   ; z hop amount

    {% if printer['pause_resume'].is_paused|int == 0 %}
        SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=zhop VALUE={z}                              ; set z hop variable for reference in resume macro
        SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=etemp VALUE={printer['extruder'].target}    ; set hotend temp variable for reference in resume macro

        #SET_FILAMENT_SENSOR SENSOR=filament_sensor ENABLE=0                                  ; disable filament sensor
        SAVE_GCODE_STATE NAME=PAUSE                                                          ; save current print position for resume
        BASE_PAUSE                                                                           ; pause print
        {% if (printer.gcode_move.position.z + z) < printer.toolhead.axis_maximum.z %}       ; check that zhop doesn't exceed z max
            G91                                                                              ; relative positioning
            G1 Z{z} F900                                                                     ; raise Z up by z hop amount
        {% else %}
            { action_respond_info("Pause zhop exceeds maximum Z height.") }                  ; if z max is exceeded, show message and set zhop value for resume to 0
            SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=zhop VALUE=0
        {% endif %}
        G90                                                                                  ; absolute positioning
        G1 X{printer.toolhead.axis_maximum.x/2} Y{printer.toolhead.axis_minimum.y+5} F27000   ; park toolhead at front center
        SAVE_GCODE_STATE NAME=PAUSEPARK                                                      ; save parked position in case toolhead is moved during the pause (otherwise the return zhop can error)
        M104 S0                                                                              ; turn off hotend
        SET_IDLE_TIMEOUT TIMEOUT=43200                                                       ; set timeout to 12 hours
    {% endif %}


[gcode_macro RESUME]
rename_existing: BASE_RESUME
variable_zhop: 0
variable_etemp: 0
gcode:
    # Parameters
    {% set e = params.E|default(2.5)|int %}                                          ; hotend prime amount (in mm)

    {% if printer['pause_resume'].is_paused|int == 1 %}
        #SET_FILAMENT_SENSOR SENSOR=filament_sensor ENABLE=1                          ; enable filament sensor
        #INITIAL_RGB                                                                    ; reset LCD color
        SET_IDLE_TIMEOUT TIMEOUT={printer.configfile.settings.idle_timeout.timeout}  ; set timeout back to configured value
        {% if etemp > 0 %}
            M109 S{etemp|int}                                                        ; wait for hotend to heat back up
        {% endif %}
        RESTORE_GCODE_STATE NAME=PAUSEPARK MOVE=1 MOVE_SPEED=100                     ; go back to parked position in case toolhead was moved during pause (otherwise the return zhop can error)
        G91                                                                          ; relative positioning
        M83                                                                          ; relative extruder positioning
        {% if printer[printer.toolhead.extruder].temperature >= printer.configfile.settings.extruder.min_extrude_temp %}
            G1 Z{zhop * -1} E{e} F900                                                ; prime nozzle by E, lower Z back down
        {% else %}
            G1 Z{zhop * -1} F900                                                     ; lower Z back down without priming (just in case we are testing the macro with cold hotend)
        {% endif %}
        #Clean_Nozzle
        RESTORE_GCODE_STATE NAME=PAUSE MOVE=1 MOVE_SPEED=450                         ; restore position
        BASE_RESUME                                                                  ; resume print
    {% endif %}


[gcode_macro CANCEL_PRINT]
rename_existing: BASE_CANCEL_PRINT
gcode:
    SET_IDLE_TIMEOUT TIMEOUT={printer.configfile.settings.idle_timeout.timeout} ; set timeout back to configured value
    CLEAR_PAUSE
    SDCARD_RESET_FILE
    PRINT_END
    BASE_CANCEL_PRINT



[gcode_macro M600]
gcode:
    {% set X = params.X|default(150)|float %}
    {% set Y = params.Y|default(0)|float %}
    {% set Z = params.Z|default(10)|float %}
    SAVE_GCODE_STATE NAME=M600_state
    PAUSE
    G91
    G1 E-.8 F2700
    G1 Z{Z}
    G90
    G1 X{X} Y{Y} F27000
    G91
    G1 E-50 F1000
    RESTORE_GCODE_STATE NAME=M600_state


[gcode_macro PARK]
gcode:
    {% set th = printer.toolhead %}
    G0 Z20 F900
    G0 X{150} Y{150} F18000


[gcode_macro G32]
gcode:
   SAVE_GCODE_STATE NAME=STATE_G32
   G90
   G28
   QUAD_GANTRY_SCAN
   PARK
   RESTORE_GCODE_STATE NAME=STATE_G32


#####################################################################
#   Input Shaper
#####################################################################

[input_shaper]
shaper_freq_x: 65.6
shaper_freq_y: 45.6
shaper_type_x: mzv
shaper_type_y: mzv
damping_ratio_x: 0.088
damping_ratio_y: 0.059


#####################################################################
#   A better print_start macro for v2/trident
#####################################################################

## *** THINGS TO UNCOMMENT: ***
## Bed mesh (2 lines at 2 locations)
## Nevermore (if you have one)
## Z_TILT_ADJUST (For Trident only)
## QUAD_GANTRY_LEVEL (For V2.4 only)

[gcode_macro PRINT_START]
gcode:
  # This part fetches data from your slicer. Such as bed, extruder, and chamber temps and size of your printer.
  {% set target_bed = params.BED|int %}
  {% set target_extruder = params.EXTRUDER|int %}
  {% set target_chamber = params.CHAMBER|default("45")|int %}
  {% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
  {% set y_wait = (printer.toolhead.axis_maximum.y-20)|float / 2 %}

  SET_GCODE_OFFSET Z=0                                 # Set offset to 0
  SET_PIN PIN=caselight VALUE=15.0
  # Home the printer, set absolute positioning and update the Stealthburner LEDs.
  STATUS_HOMING                                         # Set LEDs to homing-mode
  G28                                                   # Full home (XYZ)
  G90                                                   # Absolute position

  ##  Uncomment for bed mesh (1 of 2 for bed mesh)
  BED_MESH_CLEAR                                       # Clear old saved bed mesh (if any)

  # Check if the bed temp is higher than 90c - if so then trigger a heatsoak.
  {% if params.BED|int > 90 %}
    SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"           # Display info on display
    STATUS_HEATING                                      # Set LEDs to heating-mode
    M106 S255                                           # Turn on the PT-fan


    G1 X{x_wait} Y{y_wait} Z15 F9000                    # Go to center of the bed
    M190 S{target_bed}                                  # Set the target temp for the bed
    SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"  # Display info on display
    TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}   # Waits for chamber temp

  # If the bed temp is not over 90c, then skip the heatsoak and just heat up to set temp with a 5 min soak
  {% else %}
    SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"           # Display info on display
    STATUS_HEATING                                      # Set LEDs to heating-mode
    G1 X{x_wait} Y{y_wait} Z15 F9000                    # Go to center of the bed
    M190 S{target_bed}                                  # Set the target temp for the bed
    SET_DISPLAY_TEXT MSG="Soak for 5 min"               # Display info on display
    G4 P300000                                          # Wait 5 min for the bedtemp to stabilize
  {% endif %}

  # Heat hotend to 150c. This helps with getting a correct Z-home.
  SET_DISPLAY_TEXT MSG="Hotend: 150c"                   # Display info on display
  M109 S150                                             # Heat hotend to 150c
  #Clean_Nozzle
  G28 Z

  ##  Uncomment for V2.4 (Quad gantry level AKA QGL)
  SET_DISPLAY_TEXT MSG="Leveling"                      # Display info on display
  STATUS_LEVELING                                      # Set LEDs to leveling-mode
  QUAD_GANTRY_SCAN                                     # Level the printer via QGL. Included Z home after
  ##  Uncomment for bed mesh (2 of 2 for bed mesh)
  SET_DISPLAY_TEXT MSG="Bed mesh"                      # Display info on display
  STATUS_MESHING                                       # Set LEDs to bed mesh-mode
  BED_MESH_CALIBRATE                                   # Start the bed mesh (add ADAPTIVE=1) for adaptive bed mesh
  CARTOGRAPHER_TOUCH                                   # Calibrate z offset only with hot nozzle

  # Heat up the hotend up to target via data from slicer
  SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"     # Display info on display
  STATUS_HEATING                                        # Set LEDs to heating-mode
  G1 X{x_wait} Y{y_wait} Z15 F9000                      # Go to center of the bed
  M107                                                  # Turn off partcooling fan
  M109 S{target_extruder}                               # Heat the hotend to set temp

  # Get ready to print by doing a primeline and updating the LEDs
  SET_DISPLAY_TEXT MSG="Printer goes brr"               # Display info on display
  STATUS_PRINTING                                       # Set LEDs to printing-mode
  #G0 X{x_wait - 50} Y4 F10000                           # Go to starting point
  #G0 Z0.4                                               # Raise Z to 0.4
  G91                                                   # Incremental positioning 
  Smart_Park                                             # Parks nozzle for purge
  Line_Purge
  #Clean_Nozzle
  G90                                                   # Absolute position
  SET_PIN PIN=caselight VALUE=5.00

   

[gcode_macro PRINT_END]
#   Use PRINT_END for the slicer ending script - please customise for your slicer of choice
gcode:
    # safe anti-stringing move coords
    {% set th = printer.toolhead %}
    {% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
    {% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
    {% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
    
    SAVE_GCODE_STATE NAME=STATE_PRINT_END
    
    M400                           ; wait for buffer to clear
    G92 E0                         ; zero the extruder
    G1 E-10.0 F4800                 ; retract filament
    
    TURN_OFF_HEATERS
    
    G90                                      ; absolute positioning
    G0 X{x_safe} Y{y_safe} Z{z_safe} F20000  ; move nozzle to remove stringing
    G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 5} F3300  ; park nozzle at rear
    M107                                     ; turn off fan
    M84
    SET_PIN PIN=caselight VALUE=0.00
    Status_Off
    SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY=5
    SET_VELOCITY_LIMIT ACCEL=20000
    
    BED_MESH_CLEAR
    RESTORE_GCODE_STATE NAME=STATE_PRINT_END

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 37.610
#*# pid_ki = 3.634
#*# pid_kd = 97.316
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 42.113
#*# pid_ki = 1.485
#*# pid_kd = 298.476
#*#
#*# [scanner model default]
#*# model_coef = 1.5051871229130092,
#*# 	1.8375632863855076,
#*# 	0.7379082540340919,
#*# 	0.2678377717673656,
#*# 	0.40932668601711786,
#*# 	0.5264520567296334,
#*# 	-0.29579285263827887,
#*# 	-0.4543227990771995,
#*# 	0.29442179448640804,
#*# 	0.2742767527056163
#*# model_domain = 3.2492546819685634e-07,3.37957245485078e-07
#*# model_range = 0.200000,5.100000
#*# model_temp = 67.560082
#*# model_offset = 0.00000
#*# model_mode = touch
#*# model_fw_version = CARTOGRAPHER 5.1.0
#*#
#*# [scanner]
#*# scanner_touch_threshold = 2500
#*# scanner_touch_speed = 3
#*# scanner_touch_z_offset = 0.070
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  0.018070, 0.043851, 0.042399, 0.041333, 0.045603, 0.049483, 0.041584, 0.047585, 0.053148, 0.055816, 0.031643, 0.027044, 0.019334, 0.020422, 0.019270, 0.014801, 0.010760, 0.008663, 0.010670, 0.002580, 0.008019, -0.005143, 0.003981, 0.004422, 0.008335, 0.009633, 0.008641, 0.008497, 0.009613, 0.011263
#*# 	  0.015890, 0.042235, 0.042562, 0.045604, 0.047444, 0.049354, 0.051581, 0.057137, 0.056911, 0.077212, 0.039746, 0.029482, 0.022959, 0.026608, 0.021634, 0.020001, 0.014367, 0.015766, 0.010080, 0.013747, -0.000004, 0.006845, -0.001815, 0.015778, 0.006088, 0.016914, 0.005034, 0.016604, 0.007884, 0.023216
#*# 	  0.027029, 0.051629, 0.053636, 0.058431, 0.062189, 0.070064, 0.062933, 0.076490, 0.059403, 0.048643, 0.045424, 0.043580, 0.040028, 0.039915, 0.038666, 0.031984, 0.032667, 0.027619, 0.027534, 0.024869, 0.028693, 0.024894, 0.029390, 0.027786, 0.031066, 0.024687, 0.030266, 0.026115, 0.033741, 0.030197
#*# 	  0.049378, 0.062858, 0.068381, 0.071553, 0.079829, 0.081784, 0.093156, 0.087880, 0.088517, 0.077853, 0.074404, 0.063657, 0.071340, 0.061549, 0.063153, 0.050707, 0.058369, 0.046399, 0.052907, 0.042036, 0.049525, 0.041020, 0.048015, 0.043209, 0.051798, 0.043790, 0.053616, 0.047441, 0.055309, 0.063151
#*# 	  0.048181, 0.070323, 0.077836, 0.077930, 0.093362, 0.091936, 0.099039, 0.088475, 0.093542, 0.076892, 0.080897, 0.071824, 0.081261, 0.069458, 0.073401, 0.062934, 0.064146, 0.059007, 0.063392, 0.058579, 0.070614, 0.058988, 0.061344, 0.057762, 0.061406, 0.064235, 0.060740, 0.064870, 0.062886, 0.065204
#*# 	  0.045101, 0.078000, 0.080547, 0.089475, 0.094148, 0.100062, 0.097729, 0.098974, 0.098960, 0.093379, 0.084151, 0.081497, 0.076478, 0.078483, 0.078786, 0.071578, 0.069376, 0.064784, 0.074106, 0.065107, 0.083451, 0.072947, 0.074465, 0.064962, 0.072734, 0.061681, 0.074303, 0.058526, 0.071940, 0.060339
#*# 	  0.062723, 0.085597, 0.095843, 0.100264, 0.111078, 0.108747, 0.114266, 0.108262, 0.108353, 0.108935, 0.097591, 0.094280, 0.086126, 0.089632, 0.081271, 0.080700, 0.073577, 0.073984, 0.073143, 0.076824, 0.080141, 0.104895, 0.076217, 0.080648, 0.068169, 0.077022, 0.071294, 0.077824, 0.073248, 0.078489
#*# 	  0.075117, 0.094555, 0.098857, 0.108211, 0.111012, 0.117068, 0.111780, 0.117910, 0.113228, 0.119694, 0.133006, 0.107115, 0.104134, 0.104660, 0.089900, 0.091079, 0.081246, 0.085342, 0.075647, 0.085164, 0.075371, 0.107549, 0.079959, 0.086901, 0.074179, 0.085287, 0.080274, 0.086543, 0.079284, 0.084854
#*# 	  0.071260, 0.088409, 0.089215, 0.099798, 0.100339, 0.111584, 0.102256, 0.112723, 0.103396, 0.101741, 0.114075, 0.103122, 0.098343, 0.102280, 0.082741, 0.083987, 0.082186, 0.084058, 0.073730, 0.078131, 0.069336, 0.072466, 0.066486, 0.075988, 0.078183, 0.077670, 0.081760, 0.080216, 0.082427, 0.076749
#*# 	  0.050079, 0.070308, 0.078894, 0.079800, 0.087800, 0.086995, 0.088839, 0.083469, 0.085051, 0.072310, 0.084256, 0.083756, 0.070290, 0.075625, 0.063402, 0.066542, 0.062369, 0.065692, 0.056688, 0.059228, 0.052692, 0.055902, 0.052014, 0.063404, 0.061001, 0.068592, 0.056149, 0.068840, 0.055323, 0.063841
#*# 	  0.024260, 0.050894, 0.054505, 0.062614, 0.063921, 0.069247, 0.064617, 0.062206, 0.053997, 0.043993, 0.036021, 0.032577, 0.046074, 0.040552, 0.042133, 0.034292, 0.038625, 0.034538, 0.040046, 0.028649, 0.032818, 0.026172, 0.032455, 0.035344, 0.043668, 0.036972, 0.041838, 0.036922, 0.039234, 0.034840
#*# 	  0.010079, 0.027435, 0.038210, 0.041934, 0.048886, 0.047668, 0.050433, 0.046094, 0.044030, 0.034538, 0.030084, 0.023970, 0.034408, 0.029272, 0.032102, 0.021081, 0.027515, 0.013383, 0.018062, 0.007757, 0.015130, 0.011293, 0.018472, 0.019033, 0.027420, 0.022086, 0.025865, 0.019709, 0.024227, 0.019277
#*# 	  -0.011313, 0.008203, 0.018714, 0.021037, 0.031892, 0.027855, 0.038356, 0.026304, 0.032091, 0.019401, 0.026276, 0.014771, 0.022850, 0.018459, 0.018430, 0.009810, 0.007355, 0.005338, 0.002733, -0.003096, 0.000743, 0.004556, 0.006157, 0.010639, 0.010808, 0.014321, 0.011112, 0.013919, 0.010562, 0.012109
#*# 	  -0.024476, 0.003817, 0.005606, 0.014818, 0.015142, 0.020242, 0.018945, 0.018381, 0.012910, 0.012804, 0.008406, 0.010264, 0.006286, 0.008719, 0.003020, -0.001747, -0.000831, -0.007559, -0.007594, -0.013445, -0.004561, -0.005232, 0.002084, 0.000489, 0.007453, 0.003447, 0.008903, -0.001933, 0.005481, -0.004820
#*# 	  -0.022922, -0.000136, 0.009429, 0.010427, 0.016500, 0.013702, 0.013277, 0.010797, 0.004404, 0.008417, 0.003272, 0.006154, 0.000663, 0.001959, -0.005842, -0.004206, -0.014059, -0.013803, -0.018923, -0.013123, -0.018484, -0.008145, -0.010698, -0.002034, -0.004946, 0.002039, -0.003073, 0.001666, -0.004108, -0.003687
#*# 	  -0.026795, -0.003138, -0.001951, 0.006910, 0.005895, 0.007380, 0.004363, 0.005738, 0.001623, 0.003233, -0.003270, 0.000734, -0.007534, -0.002762, -0.011928, -0.010867, -0.022996, -0.014743, -0.023455, -0.014087, -0.025075, -0.018569, -0.020582, -0.011873, -0.013839, -0.006612, -0.010574, -0.007165, -0.015097, -0.010661
#*# 	  -0.031848, -0.012883, -0.013763, -0.000918, -0.005781, 0.001704, -0.009090, -0.001472, -0.012152, -0.006288, -0.016842, -0.008893, -0.013367, -0.011334, -0.019034, -0.022759, -0.029168, -0.026486, -0.028710, -0.026696, -0.030659, -0.027941, -0.024970, -0.024036, -0.021259, -0.021759, -0.018933, -0.023173, -0.022261, -0.025124
#*# 	  -0.037123, -0.023739, -0.017241, -0.018687, -0.011856, -0.015107, -0.014138, -0.020577, -0.019996, -0.024877, -0.021649, -0.025661, -0.023775, -0.032226, -0.037149, -0.035669, -0.040391, -0.035721, -0.041720, -0.038175, -0.042085, -0.033311, -0.034629, -0.026265, -0.030421, -0.027704, -0.037038, -0.029653, -0.040216, -0.033747
#*# 	  -0.054009, -0.033493, -0.029673, -0.021649, -0.022778, -0.017753, -0.021844, -0.025253, -0.029351, -0.034077, -0.031500, -0.037223, -0.034054, -0.043720, -0.043610, -0.048973, -0.049906, -0.056487, -0.053237, -0.058451, -0.051425, -0.052380, -0.045477, -0.045073, -0.039886, -0.046255, -0.043784, -0.048909, -0.048512, -0.051500
#*# 	  -0.043916, -0.030151, -0.022241, -0.020256, -0.012768, -0.013941, -0.013681, -0.018126, -0.021202, -0.024805, -0.022773, -0.030628, -0.028196, -0.039333, -0.036140, -0.043268, -0.037427, -0.050940, -0.049378, -0.056880, -0.052781, -0.052697, -0.044537, -0.044704, -0.037007, -0.040179, -0.039094, -0.045251, -0.045619, -0.050050
#*# 	  -0.026485, -0.009840, -0.002337, -0.000314, 0.008422, 0.004817, 0.011820, 0.001236, 0.005760, -0.003385, -0.000004, -0.007218, -0.004264, -0.012126, -0.012117, -0.015201, -0.017304, -0.026558, -0.026473, -0.027885, -0.022692, -0.021914, -0.019729, -0.016352, -0.015449, -0.013549, -0.016600, -0.020527, -0.025512, -0.024389
#*# 	  -0.006830, 0.018523, 0.019489, 0.027240, 0.029015, 0.032636, 0.031083, 0.027920, 0.022958, 0.024994, 0.019576, 0.019365, 0.014941, 0.012819, 0.010820, 0.008351, 0.006949, -0.002833, 0.000668, -0.001520, 0.005136, 0.000220, 0.007433, 0.006786, 0.013231, 0.005182, 0.010311, -0.000135, 0.004704, -0.002740
#*# 	  0.000865, 0.020559, 0.029510, 0.034514, 0.042196, 0.040383, 0.044295, 0.036260, 0.032645, 0.035981, 0.029661, 0.028386, 0.022873, 0.023385, 0.017293, 0.016633, 0.011283, 0.008759, 0.004887, 0.006693, 0.005841, 0.007687, 0.008722, 0.014472, 0.014579, 0.016885, 0.013409, 0.013237, 0.009600, 0.007645
#*# 	  -0.008225, 0.012570, 0.017770, 0.025305, 0.026535, 0.030189, 0.028101, 0.031387, 0.027847, 0.025407, 0.019440, 0.021325, 0.014473, 0.019254, 0.010084, 0.009159, 0.001677, 0.003628, -0.004523, -0.001546, -0.006597, 0.000238, -0.001415, 0.005819, 0.005467, 0.008803, 0.006304, 0.007047, -0.000568, 0.000113
#*# 	  -0.008142, 0.009324, 0.011337, 0.019845, 0.018060, 0.023302, 0.015712, 0.021689, 0.014897, 0.018993, 0.011407, 0.013366, 0.009480, 0.010355, 0.003721, 0.002219, -0.003329, -0.004211, -0.007001, -0.005755, -0.009914, -0.007909, -0.006346, -0.002446, 0.000575, 0.001483, 0.001630, -0.003123, -0.005729, -0.009160
#*# 	  -0.007987, 0.006452, 0.010752, 0.014761, 0.017961, 0.018980, 0.020139, 0.017881, 0.016062, 0.012665, 0.013184, 0.009828, 0.011099, 0.006158, 0.004259, 0.003309, -0.003896, -0.001885, -0.007265, -0.005114, -0.009074, -0.004776, -0.006617, 0.000122, -0.001681, 0.002485, -0.004023, -0.000445, -0.009139, -0.008749
#*# 	  -0.009036, 0.006333, 0.009094, 0.014535, 0.018798, 0.023260, 0.021276, 0.021532, 0.017997, 0.015577, 0.017255, 0.013152, 0.013652, 0.007763, 0.004686, 0.001217, 0.000583, -0.003299, -0.003272, -0.005526, -0.004915, -0.004200, -0.002006, 0.000118, -0.000803, 0.000214, 0.000451, -0.002245, -0.003662, -0.006081
#*# 	  0.001707, 0.017221, 0.018956, 0.023700, 0.032144, 0.032121, 0.029467, 0.026815, 0.026159, 0.023509, 0.022761, 0.018636, 0.018120, 0.013539, 0.011596, 0.006410, 0.006435, 0.000030, 0.002015, -0.001771, 0.000877, 0.000886, 0.005834, 0.004330, 0.007414, 0.005897, 0.008090, 0.002522, 0.002288, 0.001518
#*# 	  0.011422, 0.026069, 0.029113, 0.030906, 0.042133, 0.044584, 0.042551, 0.039039, 0.038399, 0.033700, 0.032433, 0.027436, 0.027869, 0.026642, 0.021791, 0.017780, 0.016494, 0.010857, 0.009059, 0.008363, 0.009066, 0.011155, 0.012757, 0.014040, 0.014403, 0.017158, 0.017563, 0.014356, 0.012917, 0.008434
#*# 	  0.002094, 0.005110, 0.008945, 0.015270, 0.019441, 0.020773, 0.018987, 0.017950, 0.017909, 0.014957, 0.011539, 0.008416, 0.007019, 0.003556, 0.001373, -0.003634, -0.003915, -0.007374, -0.012043, -0.013998, -0.013161, -0.013471, -0.010258, -0.012334, -0.004841, -0.006670, -0.003196, -0.005455, -0.005333, -0.008825
#*# x_count = 30
#*# y_count = 30
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 15.0
#*# max_x = 285.0
#*# min_y = 20.0
#*# max_y = 290.0
