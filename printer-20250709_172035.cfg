[include configs/*.cfg]
[include mainsail.cfg]


# This file contains common pin mappings for the Voron Leviathan V1.1
# To use this config, the firmware should be compiled for the STM32F446 with "No bootloader"
# Enable "extra low-level configuration options" and select the "12MHz crystal" as clock reference

# See docs/Config_Reference.md for a description of parameters.

## Voron Design VORON 2 250/300/350mm Leviathan V1.1 config

## *** THINGS TO CHANGE/CHECK: ***
## MCU paths                            [mcu] section
## Thermistor types                     [extruder] and [heater_bed] sections - See https://www.klipper3d.org/Config_Reference.html#common-thermistors for common thermistor types
## Z Endstop Switch location            [safe_z_home] section
## Homing end position                  [gcode_macro G32] section
## Z Endstop Switch  offset for Z0      [stepper_z] section
## Probe points                         [quad_gantry_level] section
## Min & Max gantry corner postions     [quad_gantry_level] section
## PID tune                             [extruder] and [heater_bed] sections
## Probe pin                            [probe] section
## Fine tune E steps                    [extruder] section

#####################################################################
#   MCU Settings
#####################################################################


[mcu] # LDO Leviathan
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_510055001851323139353737-if00
restart_method: command
##--------------------------------------------------------------------

[mcu EBBCan] #BTT EBB36 Toolhead
canbus_uuid: a5efedc08bd5

[mcu scanner] #Cartographer3D
canbus_uuid: 8ed23c97b804 
#serial: /dev/serial/by-id/usb-cartographer_cartographer_

#####################################################################
#   Cartographer Settings
#####################################################################

[scanner]
mcu: scanner            
#   Offsets are measured from the center of your coil, to the tip of your nozzle 
#   on a level axis. It is vital that this is accurate. 
x_offset: 0                          
#    adjust for your cartographers offset from nozzle to middle of coil
y_offset: 19.5                         
#    adjust for your cartographers offset from nozzle to middle of coil
backlash_comp: 0.00298
#   Backlash compensation distance for removing Z backlash before measuring
#   the sensor response.
sensor: cartographer
#    this must be set as cartographer unless using IDM etc.
sensor_alt: carto
#    alternate name to call commands. CARTO_TOUCH etc      
mesh_runs: 2
#    Number of passes to make during mesh scan.
mode: touch


#####################################################################
#   Printer Settings
#####################################################################


[printer]
kinematics: corexy
max_velocity: 500  
max_accel: 20000
max_z_velocity: 15          #Max 15 for 12V TMC Drivers, can increase for 24V
max_z_accel: 200
square_corner_velocity: 5.0


#####################################################################
#   X/Y Stepper Settings
#####################################################################


##  B Stepper - Left
##  Connected to HV STEPPER 0
##  Endstop connected to X-ENDSTOP
[stepper_x]
step_pin: PB10
dir_pin: PB11
enable_pin: !PG0
rotation_distance: 40
microsteps: 32
full_steps_per_rotation:200  #set to 200 for 1.8 degree stepper
endstop_pin: ^EBBCan: PB9
position_min: 0
##--------------------------------------------------------------------

position_endstop: 300
position_max: 300

##--------------------------------------------------------------------
homing_speed: 60   #Max 100
homing_retract_dist: 5
homing_positive_dir: true

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc5160 stepper_x]
cs_pin: PE15
spi_bus: spi4
#diag0_pin: ^!PG1
interpolate: true
run_current: 1.5
#stealthchop_threshold: 0



##  A Stepper - Right
##  Connected to HV STEPPER 1
##  Endstop connected to Y-ENDSTOP
[stepper_y]
step_pin: PF15
dir_pin: PF14
enable_pin: !PE9
rotation_distance: 40
microsteps: 32
full_steps_per_rotation:200  #set to 200 for 1.8 degree stepper
endstop_pin: ^PC2
position_min: 0
##--------------------------------------------------------------------

position_endstop: 303
position_max: 303

##--------------------------------------------------------------------
homing_speed: 60  #Max 100
homing_retract_dist: 5
homing_positive_dir: true

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc5160 stepper_y]
cs_pin: PE11
spi_bus: spi4
#diag0_pin: ^!PE10
interpolate: true
run_current: 1.5
#stealthchop_threshold: 0

 
#####################################################################
#   Z Stepper Settings
#####################################################################


## Z0 Stepper - Front Left
##  Connected to STEPPER 0
##  Endstop connected to Z-ENDSTOP
[stepper_z]
step_pin: PD4
dir_pin: !PD3
enable_pin: !PD7
rotation_distance: 40
gear_ratio: 9:1 
microsteps: 32
endstop_pin: probe:z_virtual_endstop # uses cartographer as virtual endstop
homing_retract_dist: 0
##  Z-position of nozzle (in mm) to z-endstop trigger point relative to print surface (Z0)
##  (+) value = endstop above Z0, (-) value = endstop below
##  Increasing position_endstop brings nozzle closer to the bed
##  After you run Z_ENDSTOP_CALIBRATE, position_endstop will be stored at the very end of your config

position_max: 280
position_min: -5
homing_speed: 15

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc2209 stepper_z]
uart_pin: PD5
#diag_pin: ^!PD6
interpolate: true
run_current: 0.8
#stealthchop_threshold: 0

##  Z1 Stepper - Rear Left
##  Connected to STEPPER 1
[stepper_z1]
step_pin: PC12
dir_pin: PC11
enable_pin: !PD2
rotation_distance: 40
gear_ratio: 9:1 
microsteps: 32

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc2209 stepper_z1]
uart_pin: PD0
#diag_pin: ^!PD1
interpolate: true
run_current: 0.8
#stealthchop_threshold: 0

##  Z2 Stepper - Rear Right
##  Connected to STEPPER 2
[stepper_z2]
step_pin: PC9
dir_pin: !PC8
enable_pin: !PC10
rotation_distance: 40
gear_ratio: 9:1  
microsteps: 32

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc2209 stepper_z2]
uart_pin: PA8
#diag_pin: ^!PA15
interpolate: true
run_current: 0.8
#stealthchop_threshold: 0

##  Z3 Stepper - Front Right
##  Connected to STEPPER 3
[stepper_z3]
step_pin: PG7
dir_pin: PG6
enable_pin: !PC7
rotation_distance: 40
gear_ratio: 9:1 
microsteps: 32

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc2209 stepper_z3]
uart_pin: PG8
#diag_pin: ^!PC6
interpolate: true
run_current: 0.8
#stealthchop_threshold: 0


#####################################################################
#   Extruder
#####################################################################


[extruder]
step_pin: EBBCan: PD0
dir_pin: EBBCan: PD1
enable_pin: !EBBCan: PD2
microsteps: 16
rotation_distance: 47.319989212485
gear_ratio: 9:1
nozzle_diameter: 0.400
filament_diameter: 1.750
heater_pin: EBBCan: PB13

sensor_type: MAX31865
sensor_pin: EBBCan: PA4
spi_bus: spi1
rtd_nominal_r: 100
rtd_reference_r: 430
rtd_num_of_wires: 2

#control: pid
#pid_Kp: 36.523
#pid_Ki: 3.581
#pid_Kd: 93.133

min_temp: 0
max_temp: 300
max_extrude_only_distance: 300
max_extrude_cross_section: 5


[tmc2209 extruder]
uart_pin: EBBCan: PA15
run_current: 0.60


#####################################################################
#   TMC Autotune
#####################################################################


[autotune_tmc stepper_x]
motor: omc-17hs19-2504s-h
voltage: 48
tuning_goal: performance

[autotune_tmc stepper_y]
motor: omc-17hs19-2504s-h
voltage: 48
tuning_goal: performance

[autotune_tmc stepper_z]
motor: ldo-42sth40-1684ac
voltage: 24
tuning_goal: auto

[autotune_tmc stepper_z1]
motor: ldo-42sth40-1684ac
voltage: 24
tuning_goal: performance

[autotune_tmc stepper_z2]
motor: ldo-42sth40-1684ac
voltage: 24
tuning_goal: performance

[autotune_tmc stepper_z3]
motor: ldo-42sth40-1684ac
voltage: 24
tuning_goal: performance

[autotune_tmc extruder]
motor: ldo-36sth20-1004ahg-9T
voltage: 24
tuning_goal: performance


#####################################################################
#   Bed Heater
#####################################################################


[heater_bed]
##  SSR Pin - HEATBED
##  Thermistor - TH1
heater_pin: PG11
## Check what thermistor type you have. See https://www.klipper3d.org/Config_Reference.html#common-thermistors for common thermistor types.
sensor_type: Generic 3950
sensor_pin: PA1
pullup_resistor: 2200
##  Adjust Max Power so your heater doesn't warp your bed. Rule of thumb is 0.4 watts / cm^2 .
max_power: 1.0
min_temp: 0
max_temp: 120
pwm_cycle_time: 0.02674 # 37.4Hz


#control: pid
#pid_Kp: 42.596
#pid_ki: 1.487
#pid_kd: 305.093


#####################################################################
#   Temperature Sensors
#####################################################################

[temperature_sensor buildplate]
sensor_type: Generic 3950
sensor_pin: PA2
pullup_resistor: 2200
min_temp: -40
max_temp: 120

[temperature_sensor chamber]
sensor_type: Generic 3950
sensor_pin: PA0
pullup_resistor: 2200
min_temp: -40
max_temp: 120

[temperature_sensor Raspberry_Pi]
sensor_type: temperature_host
min_temp: -40
max_temp: 120


#####################################################################
#   Fan Control
#####################################################################


[fan]
##  Print Cooling Fan
pin: EBBCan: PA0
kick_start_time: 0.5
##  Depending on your fan, you may need to increase this value
##  if your fan will not start. Can change cycle_time (increase)
##  if your fan is not able to slow down effectively
off_below: 0.10

[heater_fan hotend_fan]
##  Hotend Fan
pin: EBBCan: PA1
tachometer_pin: EBBCan: PA3
max_power: 1.0
kick_start_time: 0.5
heater: extruder
heater_temp: 50.0
##  If you are experiencing back flow, you can reduce fan_speed
fan_speed: 1.0


#[multi_pin electronics_fans]
#pins: PB7, PB3

[controller_fan skirt_fan]
pin: PB3
kick_start_time: 0.5
fan_speed: .25
idle_timeout: 60
stepper: stepper_x, stepper_y, stepper_z, stepper_z1, stepper_z2, stepper_z3
heater: heater_bed

[controller_fan driver_fan]
pin: PB7
kick_start_time: 0.5
fan_speed: 1.0
idle_timeout: 60
stepper: stepper_x, stepper_y, stepper_z, stepper_z1, stepper_z2, stepper_z3
heater: heater_bed


#####################################################################
#   Homing and Gantry Adjustment Routines
#####################################################################

[idle_timeout]
timeout: 1800

[safe_z_home]
home_xy_position: 150, 150
z_hop: 10
speed: 300
z_hop_speed: 15

##  Use QUAD_GANTRY_LEVEL to level a gantry.
##  Min & Max gantry corners - measure from nozzle at MIN (0,0) and 
##  MAX (250, 250), (300,300), or (350,350) depending on your printer size
##  to respective belt positions


[quad_gantry_level]
gantry_corners: 
	-60,-10
	360,370
points:
   15,0  # Point 1
   15,261  # Point 2
   285,261 # Point 3
   285,0  # Point 4
#--------------------------------------------------------------------

speed: 300
horizontal_move_z: 10
retries: 5
retry_tolerance: 0.0075
max_adjust: 10


[gcode_macro QUAD_GANTRY_SCAN]
gcode = 
	QUAD_GANTRY_LEVEL horizontal_move_z=10 retry_tolerance=1.000
	QUAD_GANTRY_LEVEL horizontal_move_z=2
    G28 Z

#--------------------------------------------------------------------


#####################################################################
#   Macros
#####################################################################

[bed_mesh]
zero_reference_position: 150, 150 
#    set this to the middle of your bed
speed: 300
#    movement speed of toolhead during bed mesh
horizontal_move_z: 5
#    height of scanner during bed mesh scan
mesh_min: 15, 20
#    start point of bed mesh [X, Y]
mesh_max: 285, 290
#    end point of bed mesh [X, Y]
probe_count: 30, 30
algorithm: bicubic



[temperature_sensor Cartographer_MCU]
sensor_type: temperature_mcu
sensor_mcu: scanner
min_temp: 0
max_temp: 105


[adxl345]
cs_pin: scanner:PA3
spi_bus: spi1
axes_map: x,-y,-z

[resonance_tester]
accel_chip: adxl345
accel_per_hz: 125 # Testing from default of 75
probe_points:
    150, 150, 20


[exclude_object]


[gcode_arcs]
resolution = 0.1

[firmware_retraction]
retract_length: 0.8
#   The length of filament (in mm) to retract when G10 is activated,
#   and to unretract when G11 is activated (but see
#   unretract_extra_length below). The default is 0 mm.
retract_speed: 30
#   The speed of retraction, in mm/s. The default is 20 mm/s.
unretract_extra_length: 0.8
#   The length (in mm) of *additional* filament to add when
#   unretracting.
unretract_speed: 30
#   The speed of unretraction, in mm/s. The default is 10 mm/s.


[pause_resume]

[gcode_macro PAUSE]
rename_existing: BASE_PAUSE
gcode:
    # Parameters
    {% set z = params.Z|default(10)|int %}                                                   ; z hop amount

    {% if printer['pause_resume'].is_paused|int == 0 %}
        SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=zhop VALUE={z}                              ; set z hop variable for reference in resume macro
        SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=etemp VALUE={printer['extruder'].target}    ; set hotend temp variable for reference in resume macro

        #SET_FILAMENT_SENSOR SENSOR=filament_sensor ENABLE=0                                  ; disable filament sensor
        SAVE_GCODE_STATE NAME=PAUSE                                                          ; save current print position for resume
        BASE_PAUSE                                                                           ; pause print
        {% if (printer.gcode_move.position.z + z) < printer.toolhead.axis_maximum.z %}       ; check that zhop doesn't exceed z max
            G91                                                                              ; relative positioning
            G1 Z{z} F900                                                                     ; raise Z up by z hop amount
        {% else %}
            { action_respond_info("Pause zhop exceeds maximum Z height.") }                  ; if z max is exceeded, show message and set zhop value for resume to 0
            SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=zhop VALUE=0
        {% endif %}
        G90                                                                                  ; absolute positioning
        G1 X{printer.toolhead.axis_maximum.x/2} Y{printer.toolhead.axis_minimum.y+5} F27000   ; park toolhead at front center
        SAVE_GCODE_STATE NAME=PAUSEPARK                                                      ; save parked position in case toolhead is moved during the pause (otherwise the return zhop can error)
        M104 S0                                                                              ; turn off hotend
        SET_IDLE_TIMEOUT TIMEOUT=43200                                                       ; set timeout to 12 hours
    {% endif %}


[gcode_macro RESUME]
rename_existing: BASE_RESUME
variable_zhop: 0
variable_etemp: 0
gcode:
    # Parameters
    {% set e = params.E|default(2.5)|int %}                                          ; hotend prime amount (in mm)

    {% if printer['pause_resume'].is_paused|int == 1 %}
        #SET_FILAMENT_SENSOR SENSOR=filament_sensor ENABLE=1                          ; enable filament sensor
        #INITIAL_RGB                                                                    ; reset LCD color
        SET_IDLE_TIMEOUT TIMEOUT={printer.configfile.settings.idle_timeout.timeout}  ; set timeout back to configured value
        {% if etemp > 0 %}
            M109 S{etemp|int}                                                        ; wait for hotend to heat back up
        {% endif %}
        RESTORE_GCODE_STATE NAME=PAUSEPARK MOVE=1 MOVE_SPEED=100                     ; go back to parked position in case toolhead was moved during pause (otherwise the return zhop can error)
        G91                                                                          ; relative positioning
        M83                                                                          ; relative extruder positioning
        {% if printer[printer.toolhead.extruder].temperature >= printer.configfile.settings.extruder.min_extrude_temp %}
            G1 Z{zhop * -1} E{e} F900                                                ; prime nozzle by E, lower Z back down
        {% else %}
            G1 Z{zhop * -1} F900                                                     ; lower Z back down without priming (just in case we are testing the macro with cold hotend)
        {% endif %}
        #Clean_Nozzle
        RESTORE_GCODE_STATE NAME=PAUSE MOVE=1 MOVE_SPEED=450                         ; restore position
        BASE_RESUME                                                                  ; resume print
    {% endif %}


[gcode_macro CANCEL_PRINT]
rename_existing: BASE_CANCEL_PRINT
gcode:
    SET_IDLE_TIMEOUT TIMEOUT={printer.configfile.settings.idle_timeout.timeout} ; set timeout back to configured value
    CLEAR_PAUSE
    SDCARD_RESET_FILE
    PRINT_END
    BASE_CANCEL_PRINT



[gcode_macro M600]
gcode:
    {% set X = params.X|default(150)|float %}
    {% set Y = params.Y|default(0)|float %}
    {% set Z = params.Z|default(10)|float %}
    SAVE_GCODE_STATE NAME=M600_state
    PAUSE
    G91
    G1 E-.8 F2700
    G1 Z{Z}
    G90
    G1 X{X} Y{Y} F27000
    G91
    G1 E-50 F1000
    RESTORE_GCODE_STATE NAME=M600_state


[gcode_macro PARK]
gcode:
    {% set th = printer.toolhead %}
    G0 Z20 F900
    G0 X{150} Y{150} F18000


[gcode_macro G32]
gcode:
   SAVE_GCODE_STATE NAME=STATE_G32
   G90
   G28
   QUAD_GANTRY_SCAN
   PARK
   RESTORE_GCODE_STATE NAME=STATE_G32


#####################################################################
#   Input Shaper
#####################################################################

[input_shaper]
shaper_freq_x: 65.6
shaper_freq_y: 45.6
shaper_type_x: mzv
shaper_type_y: mzv
damping_ratio_x: 0.088
damping_ratio_y: 0.059


#####################################################################
#   A better print_start macro for v2/trident
#####################################################################

## *** THINGS TO UNCOMMENT: ***
## Bed mesh (2 lines at 2 locations)
## Nevermore (if you have one)
## Z_TILT_ADJUST (For Trident only)
## QUAD_GANTRY_LEVEL (For V2.4 only)

[gcode_macro PRINT_START]
gcode:
  # This part fetches data from your slicer. Such as bed, extruder, and chamber temps and size of your printer.
  {% set target_bed = params.BED|int %}
  {% set target_extruder = params.EXTRUDER|int %}
  {% set target_chamber = params.CHAMBER|default("45")|int %}
  {% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
  {% set y_wait = (printer.toolhead.axis_maximum.y-20)|float / 2 %}

  SET_GCODE_OFFSET Z=0                                 # Set offset to 0
  SET_PIN PIN=caselight VALUE=15.0
  # Home the printer, set absolute positioning and update the Stealthburner LEDs.
  STATUS_HOMING                                         # Set LEDs to homing-mode
  G28                                                   # Full home (XYZ)
  G90                                                   # Absolute position

  ##  Uncomment for bed mesh (1 of 2 for bed mesh)
  BED_MESH_CLEAR                                       # Clear old saved bed mesh (if any)

  # Check if the bed temp is higher than 90c - if so then trigger a heatsoak.
  {% if params.BED|int > 90 %}
    SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"           # Display info on display
    STATUS_HEATING                                      # Set LEDs to heating-mode
    M106 S255                                           # Turn on the PT-fan


    G1 X{x_wait} Y{y_wait} Z15 F9000                    # Go to center of the bed
    M190 S{target_bed}                                  # Set the target temp for the bed
    SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"  # Display info on display
    TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}   # Waits for chamber temp

  # If the bed temp is not over 90c, then skip the heatsoak and just heat up to set temp with a 5 min soak
  {% else %}
    SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"           # Display info on display
    STATUS_HEATING                                      # Set LEDs to heating-mode
    G1 X{x_wait} Y{y_wait} Z15 F9000                    # Go to center of the bed
    M190 S{target_bed}                                  # Set the target temp for the bed
    SET_DISPLAY_TEXT MSG="Soak for 5 min"               # Display info on display
    G4 P300000                                          # Wait 5 min for the bedtemp to stabilize
  {% endif %}

  # Heat hotend to 150c. This helps with getting a correct Z-home.
  SET_DISPLAY_TEXT MSG="Hotend: 150c"                   # Display info on display
  M109 S150                                             # Heat hotend to 150c
  #Clean_Nozzle
  G28 Z

  ##  Uncomment for V2.4 (Quad gantry level AKA QGL)
  SET_DISPLAY_TEXT MSG="Leveling"                      # Display info on display
  STATUS_LEVELING                                      # Set LEDs to leveling-mode
  QUAD_GANTRY_SCAN                                     # Level the printer via QGL. Included Z home after
  ##  Uncomment for bed mesh (2 of 2 for bed mesh)
  SET_DISPLAY_TEXT MSG="Bed mesh"                      # Display info on display
  STATUS_MESHING                                       # Set LEDs to bed mesh-mode
  BED_MESH_CALIBRATE                                   # Start the bed mesh (add ADAPTIVE=1) for adaptive bed mesh
  CARTOGRAPHER_TOUCH                                   # Calibrate z offset only with hot nozzle

  # Heat up the hotend up to target via data from slicer
  SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"     # Display info on display
  STATUS_HEATING                                        # Set LEDs to heating-mode
  G1 X{x_wait} Y{y_wait} Z15 F9000                      # Go to center of the bed
  M107                                                  # Turn off partcooling fan
  M109 S{target_extruder}                               # Heat the hotend to set temp

  # Get ready to print by doing a primeline and updating the LEDs
  SET_DISPLAY_TEXT MSG="Printer goes brr"               # Display info on display
  STATUS_PRINTING                                       # Set LEDs to printing-mode
  #G0 X{x_wait - 50} Y4 F10000                           # Go to starting point
  #G0 Z0.4                                               # Raise Z to 0.4
  G91                                                   # Incremental positioning 
  Smart_Park                                             # Parks nozzle for purge
  Line_Purge
  #Clean_Nozzle
  G90                                                   # Absolute position
  SET_PIN PIN=caselight VALUE=5.00

   

[gcode_macro PRINT_END]
#   Use PRINT_END for the slicer ending script - please customise for your slicer of choice
gcode:
    # safe anti-stringing move coords
    {% set th = printer.toolhead %}
    {% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
    {% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
    {% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
    
    SAVE_GCODE_STATE NAME=STATE_PRINT_END
    
    M400                           ; wait for buffer to clear
    G92 E0                         ; zero the extruder
    G1 E-10.0 F4800                 ; retract filament
    
    TURN_OFF_HEATERS
    
    G90                                      ; absolute positioning
    G0 X{x_safe} Y{y_safe} Z{z_safe} F20000  ; move nozzle to remove stringing
    G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 5} F3300  ; park nozzle at rear
    M107                                     ; turn off fan
    M84
    SET_PIN PIN=caselight VALUE=0.00
    Status_Off
    SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY=5
    SET_VELOCITY_LIMIT ACCEL=20000
    
    BED_MESH_CLEAR
    RESTORE_GCODE_STATE NAME=STATE_PRINT_END

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 37.610
#*# pid_ki = 3.634
#*# pid_kd = 97.316
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 42.113
#*# pid_ki = 1.485
#*# pid_kd = 298.476
#*#
#*# [scanner model default]
#*# model_coef = 1.5051871229130092,
#*# 	1.8375632863855076,
#*# 	0.7379082540340919,
#*# 	0.2678377717673656,
#*# 	0.40932668601711786,
#*# 	0.5264520567296334,
#*# 	-0.29579285263827887,
#*# 	-0.4543227990771995,
#*# 	0.29442179448640804,
#*# 	0.2742767527056163
#*# model_domain = 3.2492546819685634e-07,3.37957245485078e-07
#*# model_range = 0.200000,5.100000
#*# model_temp = 67.560082
#*# model_offset = 0.00000
#*# model_mode = touch
#*# model_fw_version = CARTOGRAPHER 5.1.0
#*#
#*# [scanner]
#*# scanner_touch_threshold = 2500
#*# scanner_touch_speed = 3
#*# scanner_touch_z_offset = 0.090
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.016858, 0.003705, 0.010321, 0.006121, 0.008207, 0.008175, 0.003639, 0.013545, 0.020555, 0.019400, -0.006056, -0.013632, -0.015776, -0.013384, -0.014057, -0.019716, -0.024904, -0.034027, -0.030967, -0.047333, -0.042033, -0.057554, -0.043874, -0.034624, -0.025554, -0.025280, -0.025949, -0.025499, -0.024655, -0.021616
#*# 	  -0.019574, 0.005315, 0.009134, 0.014865, 0.010570, 0.013102, 0.018159, 0.025262, 0.028525, 0.041556, -0.000455, -0.005700, -0.013069, -0.006651, -0.009476, -0.012659, -0.017896, -0.022637, -0.031378, -0.028854, -0.039657, -0.038079, -0.038702, -0.019084, -0.022818, -0.017553, -0.020399, -0.016857, -0.017427, -0.011332
#*# 	  -0.005987, 0.014132, 0.015296, 0.022310, 0.025527, 0.035117, 0.030197, 0.048166, 0.020089, 0.015772, 0.006691, 0.014237, 0.011257, 0.016423, 0.011762, 0.008415, 0.004896, 0.000612, -0.004320, -0.008865, -0.008559, -0.010104, -0.004959, 0.001281, 0.001462, -0.000356, 0.000801, 0.000116, 0.004836, 0.003375
#*# 	  0.020693, 0.029915, 0.031931, 0.036815, 0.049433, 0.052960, 0.065194, 0.060055, 0.058483, 0.050304, 0.044187, 0.038820, 0.047706, 0.042914, 0.040021, 0.033157, 0.032355, 0.023874, 0.023170, 0.017152, 0.015909, 0.013639, 0.013211, 0.026246, 0.023881, 0.027857, 0.024779, 0.031614, 0.026938, 0.032453
#*# 	  0.029269, 0.050906, 0.054406, 0.055354, 0.068054, 0.073913, 0.076260, 0.071927, 0.069277, 0.055604, 0.055236, 0.053304, 0.060629, 0.053643, 0.054833, 0.042443, 0.043098, 0.035429, 0.038468, 0.033799, 0.043075, 0.027325, 0.028714, 0.033308, 0.043099, 0.042335, 0.042678, 0.043691, 0.044723, 0.042092
#*# 	  0.034601, 0.059573, 0.065919, 0.073589, 0.079226, 0.084988, 0.081662, 0.083938, 0.085441, 0.077424, 0.069268, 0.062150, 0.063835, 0.061866, 0.061199, 0.054163, 0.052942, 0.045502, 0.054140, 0.039409, 0.068746, 0.047509, 0.047629, 0.035794, 0.054666, 0.045656, 0.054273, 0.043144, 0.052836, 0.049091
#*# 	  0.050089, 0.068159, 0.078780, 0.083866, 0.095143, 0.091309, 0.095436, 0.093726, 0.097441, 0.091878, 0.086452, 0.076165, 0.073223, 0.073048, 0.073300, 0.069125, 0.065095, 0.063216, 0.060086, 0.055891, 0.068776, 0.085715, 0.058608, 0.060703, 0.054360, 0.061994, 0.057005, 0.060384, 0.056481, 0.061923
#*# 	  0.061058, 0.081453, 0.084576, 0.096115, 0.098810, 0.105557, 0.099711, 0.105870, 0.100238, 0.113794, 0.121776, 0.096565, 0.094859, 0.093663, 0.082145, 0.081486, 0.076882, 0.074237, 0.067896, 0.072004, 0.068906, 0.092425, 0.059996, 0.068626, 0.066130, 0.066447, 0.075425, 0.068748, 0.071517, 0.066322
#*# 	  0.061292, 0.079055, 0.081872, 0.091287, 0.093726, 0.100876, 0.096841, 0.098914, 0.089689, 0.087124, 0.106568, 0.091305, 0.089385, 0.089229, 0.072827, 0.075440, 0.075075, 0.074666, 0.061722, 0.065112, 0.045037, 0.052877, 0.045805, 0.058029, 0.066018, 0.070398, 0.069862, 0.072394, 0.068921, 0.069373
#*# 	  0.044517, 0.063981, 0.070295, 0.074103, 0.082982, 0.082504, 0.082604, 0.077507, 0.073204, 0.055896, 0.074584, 0.069861, 0.060003, 0.067353, 0.055039, 0.057142, 0.053901, 0.059104, 0.049378, 0.050388, 0.039510, 0.040054, 0.031315, 0.052659, 0.047741, 0.059517, 0.048825, 0.057678, 0.046723, 0.051628
#*# 	  0.017666, 0.040945, 0.044119, 0.054334, 0.054701, 0.062607, 0.055279, 0.055408, 0.040599, 0.032557, 0.019858, 0.025900, 0.037194, 0.039117, 0.037188, 0.034256, 0.037022, 0.033261, 0.034836, 0.027337, 0.023560, 0.021159, 0.024889, 0.028155, 0.035343, 0.029079, 0.032273, 0.026504, 0.028326, 0.021731
#*# 	  0.000000, 0.019145, 0.030750, 0.033571, 0.042536, 0.040902, 0.044504, 0.041114, 0.038582, 0.027853, 0.019101, 0.016377, 0.029167, 0.026392, 0.029810, 0.022646, 0.022787, 0.015068, 0.014591, 0.009402, 0.016886, 0.013540, 0.015133, 0.019397, 0.020748, 0.019220, 0.014201, 0.017935, 0.012159, 0.014708
#*# 	  -0.014302, 0.004615, 0.014526, 0.017950, 0.025214, 0.028146, 0.033775, 0.028919, 0.027610, 0.018206, 0.021521, 0.012916, 0.018542, 0.013140, 0.016249, 0.002871, 0.005526, -0.001879, 0.000515, -0.007696, -0.003877, -0.001295, 0.002026, 0.003908, 0.007589, 0.006529, 0.006858, 0.006579, 0.005815, 0.004363
#*# 	  -0.027463, -0.002339, 0.001496, 0.007416, 0.011998, 0.019135, 0.018234, 0.015880, 0.012338, 0.010724, 0.010282, 0.006687, 0.008574, 0.005152, 0.000330, -0.005717, -0.005542, -0.011557, -0.009592, -0.019970, -0.007187, -0.013156, -0.002422, -0.008628, 0.002098, -0.007186, 0.002081, -0.008549, -0.002015, -0.012570
#*# 	  -0.025713, -0.009211, 0.001699, 0.000416, 0.009026, 0.005012, 0.008602, 0.004734, 0.006289, 0.002082, 0.004934, 0.003467, 0.002780, 0.001120, -0.002836, -0.001980, -0.011585, -0.012028, -0.018570, -0.014381, -0.019492, -0.010831, -0.014583, -0.007092, -0.010005, -0.002720, -0.010047, -0.005748, -0.014386, -0.011031
#*# 	  -0.031941, -0.012300, -0.010156, -0.000553, -0.002744, 0.000780, -0.002443, 0.002208, -0.003039, -0.000820, -0.007987, -0.001606, -0.008033, -0.005014, -0.013696, -0.013199, -0.023960, -0.017936, -0.023087, -0.016494, -0.024095, -0.017853, -0.019843, -0.016516, -0.015438, -0.012908, -0.012391, -0.018292, -0.017324, -0.022415
#*# 	  -0.036541, -0.019119, -0.016904, -0.010044, -0.009089, -0.006043, -0.014225, -0.007752, -0.016059, -0.011033, -0.019426, -0.012118, -0.020707, -0.015166, -0.024737, -0.026871, -0.034916, -0.029732, -0.035948, -0.035600, -0.039330, -0.036454, -0.033929, -0.029355, -0.030506, -0.027062, -0.027145, -0.029580, -0.028308, -0.031994
#*# 	  -0.043343, -0.031778, -0.026761, -0.024902, -0.019026, -0.020971, -0.021105, -0.024190, -0.023501, -0.026518, -0.026752, -0.026381, -0.030690, -0.034866, -0.044033, -0.045578, -0.049108, -0.047626, -0.050982, -0.050430, -0.053471, -0.043580, -0.048106, -0.036798, -0.043706, -0.037549, -0.045532, -0.039749, -0.049594, -0.045730
#*# 	  -0.060929, -0.044400, -0.042119, -0.034674, -0.034545, -0.030536, -0.033376, -0.033522, -0.039532, -0.037598, -0.037739, -0.040162, -0.037305, -0.048646, -0.047589, -0.053661, -0.054638, -0.060918, -0.061087, -0.063658, -0.061689, -0.061375, -0.054724, -0.054415, -0.049711, -0.056062, -0.052567, -0.061560, -0.058774, -0.064223
#*# 	  -0.058477, -0.043373, -0.036889, -0.034194, -0.026171, -0.026912, -0.025523, -0.029306, -0.030238, -0.036317, -0.032321, -0.039318, -0.038988, -0.048390, -0.045809, -0.051033, -0.046961, -0.057739, -0.058618, -0.063560, -0.059077, -0.059269, -0.051490, -0.051122, -0.044277, -0.047748, -0.046960, -0.053965, -0.061127, -0.059488
#*# 	  -0.034445, -0.019353, -0.012551, -0.008616, -0.002523, -0.006076, 0.000476, -0.009219, -0.004435, -0.011915, -0.008696, -0.016052, -0.014274, -0.024334, -0.020508, -0.025599, -0.028188, -0.038466, -0.037783, -0.038157, -0.034236, -0.032638, -0.029704, -0.028033, -0.023694, -0.024605, -0.025969, -0.029110, -0.036102, -0.034229
#*# 	  -0.015678, 0.004988, 0.008838, 0.014289, 0.018899, 0.023002, 0.019838, 0.018514, 0.015179, 0.017464, 0.011915, 0.009356, 0.006339, 0.000293, 0.001622, -0.003461, -0.005519, -0.015087, -0.013071, -0.016034, -0.010603, -0.014379, -0.006454, -0.006376, 0.002202, -0.006166, -0.001937, -0.011653, -0.007411, -0.014400
#*# 	  -0.009615, 0.006532, 0.013876, 0.018664, 0.025601, 0.023361, 0.027580, 0.019920, 0.022877, 0.022031, 0.019763, 0.018489, 0.013898, 0.013578, 0.008803, 0.007481, 0.003347, -0.001159, -0.005173, -0.003485, -0.005331, -0.002590, -0.003493, 0.003352, 0.002229, 0.005585, 0.001355, 0.000944, -0.004768, -0.005275
#*# 	  -0.025746, -0.005212, -0.002061, 0.005112, 0.006973, 0.010685, 0.008586, 0.011950, 0.009249, 0.009087, 0.003497, 0.005764, -0.000134, 0.003521, -0.004556, -0.005055, -0.012781, -0.010504, -0.015581, -0.013156, -0.018402, -0.011938, -0.012715, -0.006070, -0.006886, -0.004081, -0.006886, -0.009030, -0.013222, -0.017554
#*# 	  -0.025856, -0.009606, -0.007479, -0.002590, 0.000270, 0.002877, -0.004050, 0.001876, -0.002755, 0.000335, -0.007960, -0.004359, -0.008138, -0.005340, -0.013374, -0.016019, -0.021031, -0.021369, -0.023542, -0.022263, -0.027778, -0.025082, -0.024039, -0.019650, -0.016303, -0.015554, -0.015259, -0.019501, -0.022570, -0.026791
#*# 	  -0.028266, -0.016559, -0.012922, -0.008135, -0.004973, -0.003135, -0.002272, -0.004225, -0.005405, -0.007287, -0.006777, -0.008522, -0.007456, -0.010688, -0.016365, -0.017697, -0.023569, -0.023905, -0.027524, -0.027252, -0.031368, -0.026929, -0.027942, -0.022508, -0.022701, -0.017643, -0.023245, -0.020425, -0.028135, -0.031210
#*# 	  -0.033696, -0.021028, -0.018477, -0.013355, -0.008371, -0.004227, -0.006094, -0.006128, -0.007020, -0.006878, -0.004503, -0.006964, -0.006973, -0.012531, -0.014343, -0.018482, -0.018535, -0.022023, -0.024038, -0.026626, -0.026662, -0.024626, -0.023036, -0.022653, -0.020931, -0.021113, -0.021300, -0.023593, -0.025810, -0.028628
#*# 	  -0.026710, -0.012828, -0.011829, -0.006798, 0.001705, 0.001466, -0.000510, -0.001961, -0.002589, -0.004570, -0.004944, -0.006895, -0.008240, -0.010970, -0.012867, -0.017926, -0.017273, -0.022499, -0.021734, -0.021415, -0.020817, -0.020290, -0.016967, -0.017819, -0.015718, -0.017153, -0.014394, -0.020260, -0.021343, -0.024870
#*# 	  -0.020817, -0.009299, -0.005522, -0.003547, 0.009365, 0.009440, 0.007889, 0.006847, 0.005914, 0.002747, 0.001761, -0.001813, -0.000980, -0.002275, -0.005285, -0.008791, -0.010468, -0.015197, -0.016761, -0.017560, -0.016979, -0.016184, -0.013973, -0.012710, -0.011749, -0.009699, -0.010530, -0.013547, -0.016023, -0.019330
#*# 	  -0.035553, -0.033057, -0.029483, -0.022467, -0.018724, -0.016384, -0.017759, -0.019107, -0.017720, -0.019745, -0.022338, -0.024347, -0.025275, -0.027118, -0.029548, -0.034180, -0.034806, -0.037679, -0.041433, -0.043411, -0.044346, -0.043490, -0.042221, -0.043741, -0.036877, -0.036610, -0.034062, -0.037612, -0.037606, -0.040987
#*# x_count = 30
#*# y_count = 30
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 15.0
#*# max_x = 285.0
#*# min_y = 20.0
#*# max_y = 290.0
