[include configs/*.cfg]
[include mainsail.cfg]


# This file contains common pin mappings for the Voron Leviathan V1.1
# To use this config, the firmware should be compiled for the STM32F446 with "No bootloader"
# Enable "extra low-level configuration options" and select the "12MHz crystal" as clock reference

# See docs/Config_Reference.md for a description of parameters.

## Voron Design VORON 2 250/300/350mm Leviathan V1.1 config

## *** THINGS TO CHANGE/CHECK: ***
## MCU paths                            [mcu] section
## Thermistor types                     [extruder] and [heater_bed] sections - See https://www.klipper3d.org/Config_Reference.html#common-thermistors for common thermistor types
## Z Endstop Switch location            [safe_z_home] section
## Homing end position                  [gcode_macro G32] section
## Z Endstop Switch  offset for Z0      [stepper_z] section
## Probe points                         [quad_gantry_level] section
## Min & Max gantry corner postions     [quad_gantry_level] section
## PID tune                             [extruder] and [heater_bed] sections
## Probe pin                            [probe] section
## Fine tune E steps                    [extruder] section

#####################################################################
#   MCU Settings
#####################################################################


[mcu] # LDO Leviathan
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_510055001851323139353737-if00
restart_method: command
##--------------------------------------------------------------------

[mcu EBBCan] #BTT EBB36 Toolhead
canbus_uuid: a5efedc08bd5

[mcu scanner] #Cartographer3D
canbus_uuid: 8ed23c97b804 
#serial: /dev/serial/by-id/usb-cartographer_cartographer_

#####################################################################
#   Cartographer Settings
#####################################################################

[scanner]
mcu: scanner            
#   Offsets are measured from the center of your coil, to the tip of your nozzle 
#   on a level axis. It is vital that this is accurate. 
x_offset: -0.75                          
#    adjust for your cartographers offset from nozzle to middle of coil
y_offset: 19.5                         
#    adjust for your cartographers offset from nozzle to middle of coil
backlash_comp: 0.00441
#   Backlash compensation distance for removing Z backlash before measuring
#   the sensor response.
sensor: cartographer
#    this must be set as cartographer unless using IDM etc.
sensor_alt: carto
#    alternate name to call commands. CARTO_TOUCH etc      
mesh_runs: 2
#    Number of passes to make during mesh scan.
mode: touch


#####################################################################
#   Printer Settings
#####################################################################


[printer]
kinematics: corexy
max_velocity: 500  
max_accel: 20000
max_z_velocity: 15          #Max 15 for 12V TMC Drivers, can increase for 24V
max_z_accel: 200
square_corner_velocity: 5.0


#####################################################################
#   X/Y Stepper Settings
#####################################################################


##  B Stepper - Left
##  Connected to HV STEPPER 0
##  Endstop connected to X-ENDSTOP
[stepper_x]
step_pin: PB10
dir_pin: PB11
enable_pin: !PG0
rotation_distance: 40
microsteps: 32
full_steps_per_rotation:200  #set to 200 for 1.8 degree stepper
endstop_pin: ^EBBCan: PB9
position_min: 0
##--------------------------------------------------------------------

position_endstop: 300
position_max: 300

##--------------------------------------------------------------------
homing_speed: 60   #Max 100
homing_retract_dist: 5
homing_positive_dir: true

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc5160 stepper_x]
cs_pin: PE15
spi_bus: spi4
#diag0_pin: ^!PG1
interpolate: true
run_current: 1.5
#stealthchop_threshold: 0



##  A Stepper - Right
##  Connected to HV STEPPER 1
##  Endstop connected to Y-ENDSTOP
[stepper_y]
step_pin: PF15
dir_pin: PF14
enable_pin: !PE9
rotation_distance: 40
microsteps: 32
full_steps_per_rotation:200  #set to 200 for 1.8 degree stepper
endstop_pin: ^PC2
position_min: 0
##--------------------------------------------------------------------

position_endstop: 303
position_max: 303

##--------------------------------------------------------------------
homing_speed: 60  #Max 100
homing_retract_dist: 5
homing_positive_dir: true

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc5160 stepper_y]
cs_pin: PE11
spi_bus: spi4
#diag0_pin: ^!PE10
interpolate: true
run_current: 1.5
#stealthchop_threshold: 0

 
#####################################################################
#   Z Stepper Settings
#####################################################################


## Z0 Stepper - Front Left
##  Connected to STEPPER 0
##  Endstop connected to Z-ENDSTOP
[stepper_z]
step_pin: PD4
dir_pin: !PD3
enable_pin: !PD7
rotation_distance: 40
gear_ratio: 9:1 
microsteps: 32
endstop_pin: probe:z_virtual_endstop # uses cartographer as virtual endstop
homing_retract_dist: 0
##  Z-position of nozzle (in mm) to z-endstop trigger point relative to print surface (Z0)
##  (+) value = endstop above Z0, (-) value = endstop below
##  Increasing position_endstop brings nozzle closer to the bed
##  After you run Z_ENDSTOP_CALIBRATE, position_endstop will be stored at the very end of your config

position_max: 280
position_min: -5
homing_speed: 15

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc2209 stepper_z]
uart_pin: PD5
#diag_pin: ^!PD6
interpolate: true
run_current: 0.8
#stealthchop_threshold: 0

##  Z1 Stepper - Rear Left
##  Connected to STEPPER 1
[stepper_z1]
step_pin: PC12
dir_pin: PC11
enable_pin: !PD2
rotation_distance: 40
gear_ratio: 9:1 
microsteps: 32

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc2209 stepper_z1]
uart_pin: PD0
#diag_pin: ^!PD1
interpolate: true
run_current: 0.8
#stealthchop_threshold: 0

##  Z2 Stepper - Rear Right
##  Connected to STEPPER 2
[stepper_z2]
step_pin: PC9
dir_pin: !PC8
enable_pin: !PC10
rotation_distance: 40
gear_ratio: 9:1  
microsteps: 32

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc2209 stepper_z2]
uart_pin: PA8
#diag_pin: ^!PA15
interpolate: true
run_current: 0.8
#stealthchop_threshold: 0

##  Z3 Stepper - Front Right
##  Connected to STEPPER 3
[stepper_z3]
step_pin: PG7
dir_pin: PG6
enable_pin: !PC7
rotation_distance: 40
gear_ratio: 9:1 
microsteps: 32

##  Make sure to update below for your relevant driver (2209 or 5160)
[tmc2209 stepper_z3]
uart_pin: PG8
#diag_pin: ^!PC6
interpolate: true
run_current: 0.8
#stealthchop_threshold: 0


#####################################################################
#   Extruder
#####################################################################


[extruder]
step_pin: EBBCan: PD0
dir_pin: EBBCan: PD1
enable_pin: !EBBCan: PD2
microsteps: 16
rotation_distance: 47.319989212485
gear_ratio: 9:1
nozzle_diameter: 0.400
filament_diameter: 1.750
heater_pin: EBBCan: PB13

sensor_type: MAX31865
sensor_pin: EBBCan: PA4
spi_bus: spi1
rtd_nominal_r: 100
rtd_reference_r: 430
rtd_num_of_wires: 2

#control: pid
#pid_Kp: 36.523
#pid_Ki: 3.581
#pid_Kd: 93.133

min_temp: 0
max_temp: 300
max_extrude_only_distance: 300
max_extrude_cross_section: 5


[tmc2209 extruder]
uart_pin: EBBCan: PA15
run_current: 0.60


#####################################################################
#   TMC Autotune
#####################################################################


[autotune_tmc stepper_x]
motor: omc-17hs19-2504s-h
voltage: 48
tuning_goal: performance

[autotune_tmc stepper_y]
motor: omc-17hs19-2504s-h
voltage: 48
tuning_goal: performance

[autotune_tmc stepper_z]
motor: ldo-42sth40-1684ac
voltage: 24
tuning_goal: auto

[autotune_tmc stepper_z1]
motor: ldo-42sth40-1684ac
voltage: 24
tuning_goal: performance

[autotune_tmc stepper_z2]
motor: ldo-42sth40-1684ac
voltage: 24
tuning_goal: performance

[autotune_tmc stepper_z3]
motor: ldo-42sth40-1684ac
voltage: 24
tuning_goal: performance

[autotune_tmc extruder]
motor: ldo-36sth20-1004ahg-9T
voltage: 24
tuning_goal: performance


#####################################################################
#   Bed Heater
#####################################################################


[heater_bed]
##  SSR Pin - HEATBED
##  Thermistor - TH1
heater_pin: PG11
## Check what thermistor type you have. See https://www.klipper3d.org/Config_Reference.html#common-thermistors for common thermistor types.
sensor_type: Generic 3950
sensor_pin: PA1
pullup_resistor: 2200
##  Adjust Max Power so your heater doesn't warp your bed. Rule of thumb is 0.4 watts / cm^2 .
max_power: 1.0
min_temp: 0
max_temp: 120
pwm_cycle_time: 0.02674 # 37.4Hz


#control: pid
#pid_Kp: 42.596
#pid_ki: 1.487
#pid_kd: 305.093


#####################################################################
#   Temperature Sensors
#####################################################################

[temperature_sensor buildplate]
sensor_type: Generic 3950
sensor_pin: PA2
pullup_resistor: 2200
min_temp: -40
max_temp: 120

[temperature_sensor chamber]
sensor_type: Generic 3950
sensor_pin: PA0
pullup_resistor: 2200
min_temp: -40
max_temp: 120

[temperature_sensor Raspberry_Pi]
sensor_type: temperature_host
min_temp: -40
max_temp: 120


#####################################################################
#   Fan Control
#####################################################################


[fan]
##  Print Cooling Fan
pin: EBBCan: PA0
kick_start_time: 0.5
##  Depending on your fan, you may need to increase this value
##  if your fan will not start. Can change cycle_time (increase)
##  if your fan is not able to slow down effectively
off_below: 0.10

[heater_fan hotend_fan]
##  Hotend Fan
pin: EBBCan: PA1
tachometer_pin: EBBCan: PA3
max_power: 1.0
kick_start_time: 0.5
heater: extruder
heater_temp: 50.0
##  If you are experiencing back flow, you can reduce fan_speed
fan_speed: 1.0


#[multi_pin electronics_fans]
#pins: PB7, PB3

[controller_fan skirt_fan]
pin: PB3
kick_start_time: 0.5
fan_speed: .25
idle_timeout: 60
stepper: stepper_x, stepper_y, stepper_z, stepper_z1, stepper_z2, stepper_z3
heater: heater_bed

[controller_fan driver_fan]
pin: PB7
kick_start_time: 0.5
fan_speed: 1.0
idle_timeout: 60
stepper: stepper_x, stepper_y, stepper_z, stepper_z1, stepper_z2, stepper_z3
heater: heater_bed


#####################################################################
#   Homing and Gantry Adjustment Routines
#####################################################################

[idle_timeout]
timeout: 1800

[safe_z_home]
home_xy_position: 150.75, 131.5 
z_hop: 10
speed: 300
z_hop_speed: 15

##  Use QUAD_GANTRY_LEVEL to level a gantry.
##  Min & Max gantry corners - measure from nozzle at MIN (0,0) and 
##  MAX (250, 250), (300,300), or (350,350) depending on your printer size
##  to respective belt positions


[quad_gantry_level]
gantry_corners: 
	-60,-10
	360,370
points:
   15,0  # Point 1
   15,261  # Point 2
   285,261 # Point 3
   285,0  # Point 4
#--------------------------------------------------------------------

speed: 300
horizontal_move_z: 10
retries: 5
retry_tolerance: 0.0075
max_adjust: 10


[gcode_macro QUAD_GANTRY_SCAN]
gcode = 
	QUAD_GANTRY_LEVEL horizontal_move_z=10 retry_tolerance=1.000
	QUAD_GANTRY_LEVEL horizontal_move_z=2
    G28 Z

#--------------------------------------------------------------------


#####################################################################
#   Macros
#####################################################################

[bed_mesh]
zero_reference_position: 150.75, 131.5   
#    set this to the middle of your bed
speed: 300
#    movement speed of toolhead during bed mesh
horizontal_move_z: 5
#    height of scanner during bed mesh scan
mesh_min: 15, 20
#    start point of bed mesh [X, Y]
mesh_max: 285, 290
#    end point of bed mesh [X, Y]
probe_count: 30, 30
algorithm: bicubic



[temperature_sensor Cartographer_MCU]
sensor_type: temperature_mcu
sensor_mcu: scanner
min_temp: 0
max_temp: 105


[adxl345]
cs_pin: scanner:PA3
spi_bus: spi1
axes_map: x,-y,-z

[resonance_tester]
accel_chip: adxl345
accel_per_hz: 125 # Testing from default of 75
probe_points:
    150, 150, 20


[exclude_object]


[gcode_arcs]
resolution = 0.1

[firmware_retraction]
retract_length: 0.8
#   The length of filament (in mm) to retract when G10 is activated,
#   and to unretract when G11 is activated (but see
#   unretract_extra_length below). The default is 0 mm.
retract_speed: 30
#   The speed of retraction, in mm/s. The default is 20 mm/s.
unretract_extra_length: 0.8
#   The length (in mm) of *additional* filament to add when
#   unretracting.
unretract_speed: 30
#   The speed of unretraction, in mm/s. The default is 10 mm/s.


[pause_resume]

[gcode_macro PAUSE]
rename_existing: BASE_PAUSE
gcode:
    # Parameters
    {% set z = params.Z|default(10)|int %}                                                   ; z hop amount

    {% if printer['pause_resume'].is_paused|int == 0 %}
        SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=zhop VALUE={z}                              ; set z hop variable for reference in resume macro
        SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=etemp VALUE={printer['extruder'].target}    ; set hotend temp variable for reference in resume macro

        #SET_FILAMENT_SENSOR SENSOR=filament_sensor ENABLE=0                                  ; disable filament sensor
        SAVE_GCODE_STATE NAME=PAUSE                                                          ; save current print position for resume
        BASE_PAUSE                                                                           ; pause print
        {% if (printer.gcode_move.position.z + z) < printer.toolhead.axis_maximum.z %}       ; check that zhop doesn't exceed z max
            G91                                                                              ; relative positioning
            G1 Z{z} F900                                                                     ; raise Z up by z hop amount
        {% else %}
            { action_respond_info("Pause zhop exceeds maximum Z height.") }                  ; if z max is exceeded, show message and set zhop value for resume to 0
            SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=zhop VALUE=0
        {% endif %}
        G90                                                                                  ; absolute positioning
        G1 X{printer.toolhead.axis_maximum.x/2} Y{printer.toolhead.axis_minimum.y+5} F27000   ; park toolhead at front center
        SAVE_GCODE_STATE NAME=PAUSEPARK                                                      ; save parked position in case toolhead is moved during the pause (otherwise the return zhop can error)
        M104 S0                                                                              ; turn off hotend
        SET_IDLE_TIMEOUT TIMEOUT=43200                                                       ; set timeout to 12 hours
    {% endif %}


[gcode_macro RESUME]
rename_existing: BASE_RESUME
variable_zhop: 0
variable_etemp: 0
gcode:
    # Parameters
    {% set e = params.E|default(2.5)|int %}                                          ; hotend prime amount (in mm)

    {% if printer['pause_resume'].is_paused|int == 1 %}
        #SET_FILAMENT_SENSOR SENSOR=filament_sensor ENABLE=1                          ; enable filament sensor
        #INITIAL_RGB                                                                    ; reset LCD color
        SET_IDLE_TIMEOUT TIMEOUT={printer.configfile.settings.idle_timeout.timeout}  ; set timeout back to configured value
        {% if etemp > 0 %}
            M109 S{etemp|int}                                                        ; wait for hotend to heat back up
        {% endif %}
        RESTORE_GCODE_STATE NAME=PAUSEPARK MOVE=1 MOVE_SPEED=100                     ; go back to parked position in case toolhead was moved during pause (otherwise the return zhop can error)
        G91                                                                          ; relative positioning
        M83                                                                          ; relative extruder positioning
        {% if printer[printer.toolhead.extruder].temperature >= printer.configfile.settings.extruder.min_extrude_temp %}
            G1 Z{zhop * -1} E{e} F900                                                ; prime nozzle by E, lower Z back down
        {% else %}
            G1 Z{zhop * -1} F900                                                     ; lower Z back down without priming (just in case we are testing the macro with cold hotend)
        {% endif %}
        #Clean_Nozzle
        RESTORE_GCODE_STATE NAME=PAUSE MOVE=1 MOVE_SPEED=450                         ; restore position
        BASE_RESUME                                                                  ; resume print
    {% endif %}


[gcode_macro CANCEL_PRINT]
rename_existing: BASE_CANCEL_PRINT
gcode:
    SET_IDLE_TIMEOUT TIMEOUT={printer.configfile.settings.idle_timeout.timeout} ; set timeout back to configured value
    CLEAR_PAUSE
    SDCARD_RESET_FILE
    PRINT_END
    BASE_CANCEL_PRINT



[gcode_macro M600]
gcode:
    {% set X = params.X|default(150)|float %}
    {% set Y = params.Y|default(0)|float %}
    {% set Z = params.Z|default(10)|float %}
    SAVE_GCODE_STATE NAME=M600_state
    PAUSE
    G91
    G1 E-.8 F2700
    G1 Z{Z}
    G90
    G1 X{X} Y{Y} F27000
    G91
    G1 E-50 F1000
    RESTORE_GCODE_STATE NAME=M600_state


[gcode_macro PARK]
gcode:
    {% set th = printer.toolhead %}
    G0 Z20 F900
    G0 X{150} Y{150} F18000


[gcode_macro G32]
gcode:
   SAVE_GCODE_STATE NAME=STATE_G32
   G90
   G28
   QUAD_GANTRY_SCAN
   PARK
   RESTORE_GCODE_STATE NAME=STATE_G32


#####################################################################
#   Input Shaper
#####################################################################

[input_shaper]
shaper_freq_x: 65.6
shaper_freq_y: 45.6
shaper_type_x: mzv
shaper_type_y: mzv
damping_ratio_x: 0.088
damping_ratio_y: 0.059


#####################################################################
#   A better print_start macro for v2/trident
#####################################################################

## *** THINGS TO UNCOMMENT: ***
## Bed mesh (2 lines at 2 locations)
## Nevermore (if you have one)
## Z_TILT_ADJUST (For Trident only)
## QUAD_GANTRY_LEVEL (For V2.4 only)

[gcode_macro PRINT_START]
gcode:
  # This part fetches data from your slicer. Such as bed, extruder, and chamber temps and size of your printer.
  {% set target_bed = params.BED|int %}
  {% set target_extruder = params.EXTRUDER|int %}
  {% set target_chamber = params.CHAMBER|default("45")|int %}
  {% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
  {% set y_wait = (printer.toolhead.axis_maximum.y-20)|float / 2 %}

  SET_GCODE_OFFSET Z=0                                 # Set offset to 0
  SET_PIN PIN=caselight VALUE=15.0
  # Home the printer, set absolute positioning and update the Stealthburner LEDs.
  STATUS_HOMING                                         # Set LEDs to homing-mode
  G28                                                   # Full home (XYZ)
  G90                                                   # Absolute position

  ##  Uncomment for bed mesh (1 of 2 for bed mesh)
  BED_MESH_CLEAR                                       # Clear old saved bed mesh (if any)

  # Check if the bed temp is higher than 90c - if so then trigger a heatsoak.
  {% if params.BED|int > 90 %}
    SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"           # Display info on display
    STATUS_HEATING                                      # Set LEDs to heating-mode
    M106 S255                                           # Turn on the PT-fan


    G1 X{x_wait} Y{y_wait} Z15 F9000                    # Go to center of the bed
    M190 S{target_bed}                                  # Set the target temp for the bed
    SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"  # Display info on display
    TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}   # Waits for chamber temp

  # If the bed temp is not over 90c, then skip the heatsoak and just heat up to set temp with a 5 min soak
  {% else %}
    SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"           # Display info on display
    STATUS_HEATING                                      # Set LEDs to heating-mode
    G1 X{x_wait} Y{y_wait} Z15 F9000                    # Go to center of the bed
    M190 S{target_bed}                                  # Set the target temp for the bed
    SET_DISPLAY_TEXT MSG="Soak for 5 min"               # Display info on display
    G4 P300000                                          # Wait 5 min for the bedtemp to stabilize
  {% endif %}

  # Heat hotend to 150c. This helps with getting a correct Z-home.
  SET_DISPLAY_TEXT MSG="Hotend: 150c"                   # Display info on display
  M109 S150                                             # Heat hotend to 150c
  #Clean_Nozzle
  G28 Z

  ##  Uncomment for V2.4 (Quad gantry level AKA QGL)
  SET_DISPLAY_TEXT MSG="Leveling"                      # Display info on display
  STATUS_LEVELING                                      # Set LEDs to leveling-mode
  QUAD_GANTRY_SCAN                                     # Level the printer via QGL. Included Z home after
  ##  Uncomment for bed mesh (2 of 2 for bed mesh)
  SET_DISPLAY_TEXT MSG="Bed mesh"                      # Display info on display
  STATUS_MESHING                                       # Set LEDs to bed mesh-mode
  BED_MESH_CALIBRATE                                   # Start the bed mesh (add ADAPTIVE=1) for adaptive bed mesh
  CARTOGRAPHER_TOUCH                                   # Calibrate z offset only with hot nozzle

  # Heat up the hotend up to target via data from slicer
  SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"     # Display info on display
  STATUS_HEATING                                        # Set LEDs to heating-mode
  G1 X{x_wait} Y{y_wait} Z15 F9000                      # Go to center of the bed
  M107                                                  # Turn off partcooling fan
  M109 S{target_extruder}                               # Heat the hotend to set temp

  # Get ready to print by doing a primeline and updating the LEDs
  SET_DISPLAY_TEXT MSG="Printer goes brr"               # Display info on display
  STATUS_PRINTING                                       # Set LEDs to printing-mode
  #G0 X{x_wait - 50} Y4 F10000                           # Go to starting point
  #G0 Z0.4                                               # Raise Z to 0.4
  G91                                                   # Incremental positioning 
  Smart_Park                                             # Parks nozzle for purge
  Line_Purge
  #Clean_Nozzle
  G90                                                   # Absolute position
  SET_PIN PIN=caselight VALUE=5.00

   

[gcode_macro PRINT_END]
#   Use PRINT_END for the slicer ending script - please customise for your slicer of choice
gcode:
    # safe anti-stringing move coords
    {% set th = printer.toolhead %}
    {% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
    {% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
    {% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
    
    SAVE_GCODE_STATE NAME=STATE_PRINT_END
    
    M400                           ; wait for buffer to clear
    G92 E0                         ; zero the extruder
    G1 E-10.0 F4800                 ; retract filament
    
    TURN_OFF_HEATERS
    
    G90                                      ; absolute positioning
    G0 X{x_safe} Y{y_safe} Z{z_safe} F20000  ; move nozzle to remove stringing
    G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 5} F3300  ; park nozzle at rear
    M107                                     ; turn off fan
    M84
    SET_PIN PIN=caselight VALUE=0.00
    Status_Off
    SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY=5
    SET_VELOCITY_LIMIT ACCEL=20000
    
    BED_MESH_CLEAR
    RESTORE_GCODE_STATE NAME=STATE_PRINT_END

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 37.610
#*# pid_ki = 3.634
#*# pid_kd = 97.316
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 42.113
#*# pid_ki = 1.485
#*# pid_kd = 298.476
#*#
#*# [scanner model default]
#*# model_coef = 1.5016252059948754,
#*# 	  1.8426923717594126,
#*# 	  0.7200865526217705,
#*# 	  0.13349144741257438,
#*# 	  0.45003821173220604,
#*# 	  1.0251246624295256,
#*# 	  -0.32404060916425653,
#*# 	  -1.1113282314744,
#*# 	  0.30270735919763525,
#*# 	  0.5621188617494567
#*# model_domain = 3.2405177177763566e-07,3.375728288860592e-07
#*# model_range = 0.200000,5.100000
#*# model_temp = 28.476236
#*# model_offset = 0.00000
#*# model_mode = touch
#*# model_fw_version = CARTOGRAPHER 5.1.0
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  0.002000, 0.018617, 0.023206, 0.020376, 0.024769, 0.021505, 0.023420, 0.025520, 0.031084, 0.023211, 0.008280, -0.002185, 0.001884, -0.003024, 0.002905, -0.009817, -0.007565, -0.020519, -0.016179, -0.029950, -0.022949, -0.031492, -0.016648, -0.011180, -0.003793, -0.008315, -0.005422, -0.008927, -0.002101, -0.004441
#*# 	  -0.001561, 0.017503, 0.022517, 0.028217, 0.025449, 0.026049, 0.031011, 0.032876, 0.037705, 0.039609, 0.007050, 0.004102, -0.000345, 0.004362, 0.000536, -0.003432, -0.005388, -0.009372, -0.012828, -0.014120, -0.019855, -0.019069, -0.016386, -0.003629, -0.004545, -0.004277, -0.006318, -0.002550, -0.002633, 0.002057
#*# 	  0.007479, 0.026159, 0.027875, 0.033402, 0.037942, 0.043035, 0.039250, 0.049031, 0.025670, 0.020368, 0.012676, 0.018059, 0.018307, 0.020716, 0.016598, 0.012413, 0.008717, 0.008174, 0.004078, 0.003548, 0.001835, 0.004422, 0.005743, 0.015708, 0.009549, 0.011641, 0.009321, 0.014559, 0.013509, 0.018465
#*# 	  0.026251, 0.036610, 0.038243, 0.044737, 0.053767, 0.059402, 0.065344, 0.060617, 0.056256, 0.050003, 0.043268, 0.040799, 0.047009, 0.041879, 0.035308, 0.032030, 0.029440, 0.026730, 0.026797, 0.023896, 0.024995, 0.024454, 0.027531, 0.033234, 0.034690, 0.034637, 0.033940, 0.036972, 0.037089, 0.040446
#*# 	  0.031536, 0.050752, 0.052139, 0.056154, 0.067129, 0.073311, 0.073236, 0.070178, 0.064147, 0.050781, 0.048443, 0.052205, 0.054223, 0.050881, 0.044907, 0.039699, 0.035031, 0.037019, 0.036445, 0.036042, 0.041406, 0.034399, 0.033551, 0.040946, 0.047013, 0.049377, 0.047041, 0.048314, 0.048802, 0.047928
#*# 	  0.032099, 0.050995, 0.059434, 0.066778, 0.073013, 0.077823, 0.075783, 0.076966, 0.076138, 0.067427, 0.058094, 0.054070, 0.056632, 0.055932, 0.051089, 0.046572, 0.042377, 0.040967, 0.048109, 0.039562, 0.064921, 0.046705, 0.046056, 0.038995, 0.054035, 0.049909, 0.053208, 0.048028, 0.053380, 0.048680
#*# 	  0.043907, 0.061302, 0.067796, 0.076636, 0.084582, 0.087108, 0.087586, 0.086101, 0.084894, 0.079958, 0.070107, 0.067631, 0.063337, 0.068487, 0.063093, 0.057321, 0.055017, 0.051904, 0.054349, 0.048058, 0.067059, 0.072281, 0.055099, 0.056032, 0.058611, 0.059151, 0.062879, 0.058910, 0.060297, 0.058475
#*# 	  0.054086, 0.066678, 0.074456, 0.080981, 0.087616, 0.091037, 0.088258, 0.091213, 0.083419, 0.092350, 0.095603, 0.076408, 0.082547, 0.078881, 0.069114, 0.064307, 0.063301, 0.059503, 0.057689, 0.060205, 0.062326, 0.082381, 0.054609, 0.065562, 0.066748, 0.070984, 0.072624, 0.068636, 0.070087, 0.068177
#*# 	  0.052772, 0.064864, 0.069341, 0.076460, 0.081236, 0.086587, 0.084936, 0.083531, 0.075196, 0.067920, 0.084110, 0.070817, 0.077557, 0.071475, 0.062650, 0.058101, 0.062295, 0.057499, 0.052943, 0.053933, 0.041276, 0.045864, 0.044709, 0.056854, 0.066811, 0.067799, 0.069035, 0.069345, 0.069023, 0.066800
#*# 	  0.034202, 0.052144, 0.055655, 0.060589, 0.067109, 0.068571, 0.069593, 0.064352, 0.059157, 0.039902, 0.062163, 0.048670, 0.051016, 0.052905, 0.046076, 0.043554, 0.043018, 0.045164, 0.039768, 0.039009, 0.034202, 0.032107, 0.032448, 0.047860, 0.047613, 0.053240, 0.049519, 0.051696, 0.046687, 0.047506
#*# 	  0.011532, 0.029466, 0.033518, 0.038555, 0.044161, 0.045925, 0.045300, 0.042435, 0.031099, 0.020386, 0.012336, 0.012565, 0.025571, 0.026128, 0.024796, 0.022298, 0.021111, 0.022853, 0.020719, 0.019535, 0.016442, 0.017706, 0.021067, 0.028386, 0.030377, 0.029814, 0.028805, 0.027611, 0.026171, 0.025736
#*# 	  -0.007327, 0.009187, 0.016752, 0.022712, 0.027684, 0.030440, 0.029817, 0.030045, 0.023908, 0.016840, 0.007424, 0.009228, 0.015504, 0.017317, 0.014428, 0.010006, 0.007063, 0.004120, 0.002583, 0.002126, 0.007722, 0.009927, 0.012371, 0.017006, 0.018123, 0.017542, 0.017221, 0.017956, 0.017155, 0.017500
#*# 	  -0.022558, -0.006046, 0.001261, 0.006518, 0.011017, 0.015191, 0.018069, 0.014518, 0.013452, 0.009305, 0.007766, 0.004277, 0.006152, 0.004264, 0.001220, -0.006106, -0.006878, -0.009769, -0.012713, -0.012036, -0.011474, -0.004246, -0.001344, 0.003320, 0.005386, 0.005402, 0.006479, 0.006563, 0.007654, 0.006652
#*# 	  -0.029109, -0.014961, -0.008821, -0.004513, 0.001218, 0.003893, 0.005844, 0.003280, 0.000509, -0.001180, -0.002007, -0.002902, -0.002675, -0.004137, -0.010385, -0.014077, -0.015657, -0.019759, -0.022515, -0.023738, -0.016673, -0.016164, -0.010285, -0.008772, -0.003958, -0.005525, -0.000849, -0.004311, -0.002292, -0.005825
#*# 	  -0.031236, -0.016614, -0.009049, -0.006020, -0.003433, -0.004472, -0.004017, -0.006786, -0.005801, -0.007022, -0.007788, -0.009434, -0.008889, -0.011698, -0.014467, -0.015484, -0.022096, -0.024068, -0.026742, -0.026578, -0.024798, -0.020281, -0.017852, -0.014670, -0.010542, -0.007699, -0.005988, -0.007495, -0.008118, -0.010911
#*# 	  -0.034260, -0.021499, -0.015928, -0.010242, -0.008255, -0.013718, -0.011131, -0.012899, -0.012077, -0.016368, -0.018079, -0.016762, -0.016706, -0.018237, -0.020601, -0.025461, -0.030027, -0.028461, -0.031725, -0.029281, -0.031614, -0.028392, -0.025321, -0.020783, -0.017947, -0.014339, -0.012401, -0.013200, -0.013884, -0.016136
#*# 	  -0.041637, -0.028845, -0.024910, -0.020013, -0.019806, -0.019098, -0.021944, -0.021184, -0.023593, -0.024966, -0.028509, -0.027522, -0.027843, -0.027541, -0.031527, -0.039956, -0.042596, -0.043121, -0.042261, -0.043159, -0.042998, -0.040609, -0.035174, -0.032159, -0.029909, -0.028154, -0.026321, -0.026760, -0.026844, -0.027636
#*# 	  -0.049039, -0.035335, -0.035702, -0.031183, -0.028505, -0.027607, -0.030417, -0.031736, -0.034471, -0.034885, -0.035286, -0.034692, -0.037078, -0.042905, -0.051722, -0.053361, -0.054983, -0.054610, -0.056062, -0.055302, -0.053748, -0.048972, -0.045416, -0.041633, -0.041437, -0.039795, -0.039489, -0.038889, -0.040560, -0.040981
#*# 	  -0.062694, -0.050936, -0.045764, -0.040030, -0.037758, -0.035718, -0.037642, -0.040725, -0.043340, -0.045001, -0.044981, -0.047172, -0.046968, -0.054609, -0.056878, -0.061322, -0.064603, -0.067253, -0.067771, -0.067485, -0.064885, -0.061224, -0.056482, -0.053172, -0.051088, -0.052274, -0.051625, -0.054204, -0.054143, -0.054596
#*# 	  -0.057262, -0.044901, -0.039848, -0.033388, -0.030380, -0.026752, -0.032110, -0.031486, -0.038057, -0.038226, -0.041535, -0.041534, -0.045263, -0.051043, -0.054245, -0.053827, -0.056400, -0.062970, -0.064904, -0.065381, -0.063689, -0.059161, -0.053365, -0.050160, -0.046206, -0.045437, -0.045157, -0.047905, -0.048964, -0.050766
#*# 	  -0.035921, -0.023353, -0.017994, -0.014553, -0.009218, -0.008425, -0.006628, -0.013173, -0.012753, -0.017132, -0.018014, -0.020671, -0.023522, -0.029110, -0.028599, -0.032025, -0.034979, -0.043171, -0.040918, -0.038826, -0.036793, -0.035002, -0.031192, -0.027025, -0.023823, -0.023618, -0.023377, -0.026906, -0.029527, -0.027987
#*# 	  -0.015960, -0.001801, 0.005135, 0.006874, 0.014362, 0.013611, 0.012432, 0.008769, 0.007301, 0.006441, 0.002736, 0.001039, -0.001548, -0.004610, -0.006831, -0.009171, -0.014693, -0.019351, -0.016445, -0.015038, -0.013045, -0.013734, -0.010271, -0.005791, -0.002644, -0.003789, -0.002165, -0.005336, -0.004271, -0.006311
#*# 	  -0.011021, 0.003528, 0.010685, 0.014764, 0.020951, 0.019010, 0.021915, 0.016251, 0.017019, 0.016580, 0.011442, 0.008167, 0.007561, 0.006222, 0.002693, -0.000371, -0.004935, -0.007710, -0.007645, -0.005637, -0.007152, -0.007469, -0.005330, 0.000126, 0.003041, 0.005735, 0.004384, 0.003118, 0.001823, -0.000367
#*# 	  -0.017344, -0.004290, 0.001473, 0.006199, 0.009760, 0.008562, 0.010035, 0.010740, 0.010761, 0.002561, 0.004307, 0.000114, 0.000053, -0.000855, -0.003734, -0.009739, -0.012077, -0.014865, -0.012890, -0.012029, -0.014800, -0.012857, -0.010660, -0.006663, -0.004299, -0.002458, -0.001053, -0.003439, -0.005611, -0.007444
#*# 	  -0.019327, -0.005914, -0.005091, 0.000643, 0.001227, 0.003394, -0.001259, 0.002691, -0.001324, -0.000785, -0.006293, -0.005582, -0.006814, -0.006721, -0.011355, -0.014807, -0.019499, -0.020192, -0.018230, -0.016756, -0.021564, -0.021356, -0.019269, -0.014669, -0.010936, -0.009590, -0.008852, -0.011067, -0.012539, -0.016212
#*# 	  -0.021789, -0.008479, -0.007257, 0.000265, -0.001135, 0.004311, -0.000855, 0.002592, -0.003971, -0.003789, -0.006349, -0.005477, -0.005585, -0.007231, -0.010115, -0.014853, -0.018308, -0.018889, -0.018391, -0.018529, -0.020868, -0.020344, -0.018916, -0.015031, -0.013241, -0.012026, -0.011431, -0.012033, -0.013819, -0.018875
#*# 	  -0.021435, -0.011039, -0.008519, -0.003489, 0.000739, 0.003822, 0.003232, 0.000946, -0.000033, -0.001469, -0.001156, -0.001702, -0.001904, -0.006885, -0.008767, -0.013727, -0.013530, -0.016984, -0.015266, -0.015778, -0.016254, -0.016263, -0.014196, -0.012588, -0.011436, -0.010525, -0.009453, -0.011110, -0.011310, -0.013692
#*# 	  -0.010125, 0.000892, 0.001812, 0.008475, 0.014960, 0.016488, 0.010932, 0.011222, 0.005987, 0.006503, 0.001839, 0.003202, 0.000030, -0.000525, -0.004708, -0.006078, -0.011317, -0.011982, -0.011430, -0.009468, -0.010357, -0.009130, -0.007117, -0.006349, -0.004471, -0.004468, -0.002362, -0.005566, -0.006125, -0.008388
#*# 	  -0.001893, 0.007673, 0.011687, 0.012217, 0.025200, 0.022853, 0.023380, 0.020495, 0.019854, 0.013532, 0.015317, 0.009080, 0.011584, 0.009287, 0.007894, 0.001185, 0.000081, -0.004244, -0.004345, -0.004179, -0.003754, -0.002859, -0.000695, 0.001213, 0.001963, 0.005905, 0.006267, 0.003221, 0.001237, -0.000643
#*# 	  -0.017156, -0.014837, -0.009227, -0.004297, 0.001691, -0.000882, 0.001262, -0.003376, -0.002486, -0.006642, -0.008521, -0.011222, -0.011790, -0.014992, -0.016060, -0.020511, -0.021642, -0.024594, -0.027646, -0.028457, -0.028582, -0.027550, -0.026536, -0.027019, -0.019623, -0.018871, -0.016302, -0.018426, -0.018031, -0.021810
#*# x_count = 30
#*# y_count = 30
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 15.0
#*# max_x = 285.0
#*# min_y = 20.0
#*# max_y = 290.0
#*#
#*# [scanner]
#*# scanner_touch_threshold = 2750
#*# scanner_touch_speed = 3
