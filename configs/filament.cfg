[gcode_macro LOAD_FILAMENT]
variable_load_distance:   125  #mm
variable_retract_distance: 15  #mm
variable_purge_speed:     10  #mm/s
gcode:
    SAVE_GCODE_STATE NAME=load_state
    M109 S260
    G91
    G92 E0
    G1 E{load_distance} F{purge_speed * 60} 
    G1 E-{retract_distance} F{purge_speed * 60 * 1.25}
    RESTORE_GCODE_STATE NAME=load_state


[gcode_macro UNLOAD_FILAMENT]
variable_unload_distance:  125  #mm
variable_retract_distance: 15  #mm
variable_purge_distance:   10  #mm
variable_purge_speed:      10  #mm/s
gcode:
    SAVE_GCODE_STATE NAME=unload_state
    M109 S260
    G91
    G92 E0
    G1 E{purge_distance} F{purge_speed * 60}
    G1 E-{retract_distance} F{purge_speed * 60 * 2}
    G1 E-{unload_distance} F{purge_speed * 60 * 1.5}
    RESTORE_GCODE_STATE NAME=unload_state